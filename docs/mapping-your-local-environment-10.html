<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R, Databases and Docker</title>
  <meta name="description" content="A collection of tutorials for integrating R with databases using Docker">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R, Databases and Docker" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A collection of tutorials for integrating R with databases using Docker" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R, Databases and Docker" />
  
  <meta name="twitter:description" content="A collection of tutorials for integrating R with databases using Docker" />
  

<meta name="author" content="John David Smith, Sophie Yang, M. Edward (Ed) Borasky, Scott Came, Mary Anne Thygesen, Ian Frantz, and Dipti Muni">


<meta name="date" content="2018-12-07">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="securing-and-using-your-dbms-credentials-05b.html">
<link rel="next" href="introduction-to-dbms-queries-11a.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.5/datatables.js"></script>
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<script src="libs/viz-0.3/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.0/grViz.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R, Databases and Docker</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#using-r-to-query-a-dbms-in-your-organization"><i class="fa fa-check"></i><b>1.1</b> Using R to query a DBMS in your organization</a><ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#why-write-a-book-about-dbms-access-from-r-using-docker"><i class="fa fa-check"></i><b>1.1.1</b> Why write a book about DBMS access from R using Docker?</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#docker-as-a-tool-for-users"><i class="fa fa-check"></i><b>1.2</b> Docker as a tool for UseRs</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#docker-and-r-on-your-machine"><i class="fa fa-check"></i><b>1.3</b> Docker and R on your machine</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#who-are-we"><i class="fa fa-check"></i><b>1.4</b> Who are we?</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#how-did-this-project-come-about"><i class="fa fa-check"></i><b>1.5</b> How did this project come about?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="setup-instructions-00.html"><a href="setup-instructions-00.html"><i class="fa fa-check"></i><b>2</b> Setup instructions (00)</a><ul>
<li class="chapter" data-level="2.1" data-path="setup-instructions-00.html"><a href="setup-instructions-00.html#r-rstudio-and-git"><i class="fa fa-check"></i><b>2.1</b> R, RStudio and Git</a></li>
<li class="chapter" data-level="2.2" data-path="setup-instructions-00.html"><a href="setup-instructions-00.html#docker"><i class="fa fa-check"></i><b>2.2</b> Docker</a></li>
<li class="chapter" data-level="2.3" data-path="setup-instructions-00.html"><a href="setup-instructions-00.html#defining-the-postgresql-connection-parameters"><i class="fa fa-check"></i><b>2.3</b> Defining the PostgreSQL connection parameters</a></li>
<li class="chapter" data-level="2.4" data-path="setup-instructions-00.html"><a href="setup-instructions-00.html#next-steps"><i class="fa fa-check"></i><b>2.4</b> Next steps</a><ul>
<li class="chapter" data-level="2.4.1" data-path="setup-instructions-00.html"><a href="setup-instructions-00.html#browsing-the-book"><i class="fa fa-check"></i><b>2.4.1</b> Browsing the book</a></li>
<li class="chapter" data-level="2.4.2" data-path="setup-instructions-00.html"><a href="setup-instructions-00.html#diving-in"><i class="fa fa-check"></i><b>2.4.2</b> Diving in</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="how-to-use-this-book-01.html"><a href="how-to-use-this-book-01.html"><i class="fa fa-check"></i><b>3</b> How to use this book (01)</a><ul>
<li class="chapter" data-level="3.1" data-path="how-to-use-this-book-01.html"><a href="how-to-use-this-book-01.html#prerequisites"><i class="fa fa-check"></i><b>3.1</b> Prerequisites</a></li>
<li class="chapter" data-level="3.2" data-path="how-to-use-this-book-01.html"><a href="how-to-use-this-book-01.html#installing-docker"><i class="fa fa-check"></i><b>3.2</b> Installing Docker</a></li>
<li class="chapter" data-level="3.3" data-path="how-to-use-this-book-01.html"><a href="how-to-use-this-book-01.html#download-the-repo"><i class="fa fa-check"></i><b>3.3</b> Download the repo</a></li>
<li class="chapter" data-level="3.4" data-path="how-to-use-this-book-01.html"><a href="how-to-use-this-book-01.html#read-along-experiment-as-you-go"><i class="fa fa-check"></i><b>3.4</b> Read along, experiment as you go</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html"><i class="fa fa-check"></i><b>4</b> Docker Hosting for Windows (02)</a><ul>
<li class="chapter" data-level="4.1" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#hardware-requirements"><i class="fa fa-check"></i><b>4.1</b> Hardware requirements</a></li>
<li class="chapter" data-level="4.2" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#software-requirements"><i class="fa fa-check"></i><b>4.2</b> Software requirements</a><ul>
<li class="chapter" data-level="4.2.1" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#windows-7-8-8.1-and-windows-10-home-64-bit"><i class="fa fa-check"></i><b>4.2.1</b> Windows 7, 8, 8.1 and Windows 10 Home (64 bit)</a></li>
<li class="chapter" data-level="4.2.2" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#windows-10-pro"><i class="fa fa-check"></i><b>4.2.2</b> Windows 10 Pro</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#additional-technical-details"><i class="fa fa-check"></i><b>4.3</b> Additional technical details</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="learning-goals-and-use-cases-03.html"><a href="learning-goals-and-use-cases-03.html"><i class="fa fa-check"></i><b>5</b> Learning Goals and Use Cases (03)</a><ul>
<li class="chapter" data-level="5.1" data-path="learning-goals-and-use-cases-03.html"><a href="learning-goals-and-use-cases-03.html#ask-yourself-what-are-you-aiming-for"><i class="fa fa-check"></i><b>5.1</b> Ask yourself, what are you aiming for?</a></li>
<li class="chapter" data-level="5.2" data-path="learning-goals-and-use-cases-03.html"><a href="learning-goals-and-use-cases-03.html#learning-goals"><i class="fa fa-check"></i><b>5.2</b> Learning Goals</a></li>
<li class="chapter" data-level="5.3" data-path="learning-goals-and-use-cases-03.html"><a href="learning-goals-and-use-cases-03.html#imagining-a-dvd-rental-business"><i class="fa fa-check"></i><b>5.3</b> Imagining a DVD rental business</a></li>
<li class="chapter" data-level="5.4" data-path="learning-goals-and-use-cases-03.html"><a href="learning-goals-and-use-cases-03.html#use-cases"><i class="fa fa-check"></i><b>5.4</b> Use cases</a></li>
<li class="chapter" data-level="5.5" data-path="learning-goals-and-use-cases-03.html"><a href="learning-goals-and-use-cases-03.html#investigating-a-question-using-with-an-organizations-database"><i class="fa fa-check"></i><b>5.5</b> Investigating a question using with an organization’s database</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="connecting-docker-postgres-and-r-04.html"><a href="connecting-docker-postgres-and-r-04.html"><i class="fa fa-check"></i><b>6</b> Connecting Docker, Postgres, and R (04)</a><ul>
<li class="chapter" data-level="6.1" data-path="connecting-docker-postgres-and-r-04.html"><a href="connecting-docker-postgres-and-r-04.html#verify-that-docker-is-running"><i class="fa fa-check"></i><b>6.1</b> Verify that Docker is running</a></li>
<li class="chapter" data-level="6.2" data-path="connecting-docker-postgres-and-r-04.html"><a href="connecting-docker-postgres-and-r-04.html#clean-up-if-appropriate"><i class="fa fa-check"></i><b>6.2</b> Clean up if appropriate</a></li>
<li class="chapter" data-level="6.3" data-path="connecting-docker-postgres-and-r-04.html"><a href="connecting-docker-postgres-and-r-04.html#connect-read-and-write-to-postgres-from-r"><i class="fa fa-check"></i><b>6.3</b> Connect, read and write to Postgres from R</a><ul>
<li class="chapter" data-level="6.3.1" data-path="connecting-docker-postgres-and-r-04.html"><a href="connecting-docker-postgres-and-r-04.html#connect-with-postgres"><i class="fa fa-check"></i><b>6.3.1</b> Connect with Postgres</a></li>
<li class="chapter" data-level="6.3.2" data-path="connecting-docker-postgres-and-r-04.html"><a href="connecting-docker-postgres-and-r-04.html#interact-with-postgres"><i class="fa fa-check"></i><b>6.3.2</b> Interact with Postgres</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="connecting-docker-postgres-and-r-04.html"><a href="connecting-docker-postgres-and-r-04.html#clean-up"><i class="fa fa-check"></i><b>6.4</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="the-dvdrental-database-in-postgres-in-docker-05a.html"><a href="the-dvdrental-database-in-postgres-in-docker-05a.html"><i class="fa fa-check"></i><b>7</b> The dvdrental database in Postgres in Docker (05a)</a><ul>
<li class="chapter" data-level="7.1" data-path="the-dvdrental-database-in-postgres-in-docker-05a.html"><a href="the-dvdrental-database-in-postgres-in-docker-05a.html#overview"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="the-dvdrental-database-in-postgres-in-docker-05a.html"><a href="the-dvdrental-database-in-postgres-in-docker-05a.html#verify-that-docker-is-up-and-running"><i class="fa fa-check"></i><b>7.2</b> Verify that Docker is up and running</a></li>
<li class="chapter" data-level="7.3" data-path="the-dvdrental-database-in-postgres-in-docker-05a.html"><a href="the-dvdrental-database-in-postgres-in-docker-05a.html#clean-up-if-appropriate-1"><i class="fa fa-check"></i><b>7.3</b> Clean up if appropriate</a></li>
<li class="chapter" data-level="7.4" data-path="the-dvdrental-database-in-postgres-in-docker-05a.html"><a href="the-dvdrental-database-in-postgres-in-docker-05a.html#build-the-pet-sql-docker-image"><i class="fa fa-check"></i><b>7.4</b> Build the pet-sql Docker Image</a></li>
<li class="chapter" data-level="7.5" data-path="the-dvdrental-database-in-postgres-in-docker-05a.html"><a href="the-dvdrental-database-in-postgres-in-docker-05a.html#run-the-pet-sql-docker-image"><i class="fa fa-check"></i><b>7.5</b> Run the pet-sql Docker Image</a></li>
<li class="chapter" data-level="7.6" data-path="the-dvdrental-database-in-postgres-in-docker-05a.html"><a href="the-dvdrental-database-in-postgres-in-docker-05a.html#connect-to-postgres-with-r"><i class="fa fa-check"></i><b>7.6</b> Connect to Postgres with R</a></li>
<li class="chapter" data-level="7.7" data-path="the-dvdrental-database-in-postgres-in-docker-05a.html"><a href="the-dvdrental-database-in-postgres-in-docker-05a.html#stop-and-start-to-demonstrate-persistence"><i class="fa fa-check"></i><b>7.7</b> Stop and start to demonstrate persistence</a></li>
<li class="chapter" data-level="7.8" data-path="the-dvdrental-database-in-postgres-in-docker-05a.html"><a href="the-dvdrental-database-in-postgres-in-docker-05a.html#cleaning-up"><i class="fa fa-check"></i><b>7.8</b> Cleaning up</a></li>
<li class="chapter" data-level="7.9" data-path="the-dvdrental-database-in-postgres-in-docker-05a.html"><a href="the-dvdrental-database-in-postgres-in-docker-05a.html#using-the-sql-pet-container-in-the-rest-of-the-book"><i class="fa fa-check"></i><b>7.9</b> Using the <code>sql-pet</code> container in the rest of the book</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="securing-and-using-your-dbms-credentials-05b.html"><a href="securing-and-using-your-dbms-credentials-05b.html"><i class="fa fa-check"></i><b>8</b> Securing and using your dbms credentials (05b)</a><ul>
<li class="chapter" data-level="8.1" data-path="securing-and-using-your-dbms-credentials-05b.html"><a href="securing-and-using-your-dbms-credentials-05b.html#set-up-the-sql-pet-docker-container"><i class="fa fa-check"></i><b>8.1</b> Set up the sql-pet docker container</a><ul>
<li class="chapter" data-level="8.1.1" data-path="securing-and-using-your-dbms-credentials-05b.html"><a href="securing-and-using-your-dbms-credentials-05b.html#verify-that-docker-is-running-1"><i class="fa fa-check"></i><b>8.1.1</b> Verify that Docker is running</a></li>
<li class="chapter" data-level="8.1.2" data-path="securing-and-using-your-dbms-credentials-05b.html"><a href="securing-and-using-your-dbms-credentials-05b.html#start-the-docker-container"><i class="fa fa-check"></i><b>8.1.2</b> Start the docker container:</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="securing-and-using-your-dbms-credentials-05b.html"><a href="securing-and-using-your-dbms-credentials-05b.html#storing-your-dbms-credentials"><i class="fa fa-check"></i><b>8.2</b> Storing your dbms credentials</a><ul>
<li class="chapter" data-level="8.2.1" data-path="securing-and-using-your-dbms-credentials-05b.html"><a href="securing-and-using-your-dbms-credentials-05b.html#connect-with-postgres-using-the-sys.getenv-function"><i class="fa fa-check"></i><b>8.2.1</b> Connect with Postgres using the Sys.getenv function</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="securing-and-using-your-dbms-credentials-05b.html"><a href="securing-and-using-your-dbms-credentials-05b.html#clean-up-1"><i class="fa fa-check"></i><b>8.3</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html"><i class="fa fa-check"></i><b>9</b> Mapping your local environment (10)</a><ul>
<li class="chapter" data-level="9.1" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#set-up-docker-environment"><i class="fa fa-check"></i><b>9.1</b> Set up docker environment</a></li>
<li class="chapter" data-level="9.2" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#tutorial-environment"><i class="fa fa-check"></i><b>9.2</b> Tutorial Environment</a><ul>
<li class="chapter" data-level="9.2.1" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#each-element-in-turn-and-what-elements-it-can-communicate-with"><i class="fa fa-check"></i><b>9.2.1</b> each element in turn and what elements it can communicate with</a></li>
<li class="chapter" data-level="9.2.2" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#rstudio"><i class="fa fa-check"></i><b>9.2.2</b> Rstudio</a></li>
<li class="chapter" data-level="9.2.3" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#unix-command-interpreter-on-your-computer"><i class="fa fa-check"></i><b>9.2.3</b> Unix (command interpreter on your computer)</a></li>
<li class="chapter" data-level="9.2.4" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#r"><i class="fa fa-check"></i><b>9.2.4</b> R</a></li>
<li class="chapter" data-level="9.2.5" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#docker-client"><i class="fa fa-check"></i><b>9.2.5</b> Docker client</a></li>
<li class="chapter" data-level="9.2.6" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#bash-inside-docker"><i class="fa fa-check"></i><b>9.2.6</b> bash (inside Docker)</a></li>
<li class="chapter" data-level="9.2.7" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#psql-inside-docker"><i class="fa fa-check"></i><b>9.2.7</b> psql (inside Docker)</a></li>
<li class="chapter" data-level="9.2.8" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#postgresql-inside-docker"><i class="fa fa-check"></i><b>9.2.8</b> postgreSQL (inside Docker)</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#command-structure"><i class="fa fa-check"></i><b>9.3</b> command structure</a><ul>
<li class="chapter" data-level="9.3.1" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#get-info-on-a-local-file-from-r-code"><i class="fa fa-check"></i><b>9.3.1</b> Get info on a local file from R code</a></li>
<li class="chapter" data-level="9.3.2" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#get-info-on-the-same-os-file-inside-docker-from-r-code"><i class="fa fa-check"></i><b>9.3.2</b> Get info on the same OS file inside Docker from R Code</a></li>
<li class="chapter" data-level="9.3.3" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#list-postgresql-users-from-rstudio-terminal-simulated"><i class="fa fa-check"></i><b>9.3.3</b> List postgreSQL users from Rstudio terminal (simulated)</a></li>
<li class="chapter" data-level="9.3.4" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#list-postgresql-users-from-r-code"><i class="fa fa-check"></i><b>9.3.4</b> List postgreSQL users from R code</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#exercises"><i class="fa fa-check"></i><b>9.4</b> Exercises</a></li>
<li class="chapter" data-level="9.5" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#dynamic-environment-graph"><i class="fa fa-check"></i><b>9.5</b> Dynamic environment graph</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html"><i class="fa fa-check"></i><b>10</b> Introduction to DBMS queries (11a)</a><ul>
<li class="chapter" data-level="10.1" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#getting-data-from-the-database"><i class="fa fa-check"></i><b>10.1</b> Getting data from the database</a><ul>
<li class="chapter" data-level="10.1.1" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#finding-out-whats-there"><i class="fa fa-check"></i><b>10.1.1</b> Finding out what’s there</a></li>
<li class="chapter" data-level="10.1.2" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#listing-all-the-fields-for-all-the-tables"><i class="fa fa-check"></i><b>10.1.2</b> Listing all the fields for all the tables</a></li>
<li class="chapter" data-level="10.1.3" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#downloading-an-entire-table"><i class="fa fa-check"></i><b>10.1.3</b> Downloading an entire table</a></li>
<li class="chapter" data-level="10.1.4" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#a-table-object-that-can-be-reused"><i class="fa fa-check"></i><b>10.1.4</b> A table object that can be reused</a></li>
<li class="chapter" data-level="10.1.5" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#controlling-the-number-of-rows-returned"><i class="fa fa-check"></i><b>10.1.5</b> Controlling the number of rows returned</a></li>
<li class="chapter" data-level="10.1.6" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#random-rows-from-the-dbms"><i class="fa fa-check"></i><b>10.1.6</b> Random rows from the dbms</a></li>
<li class="chapter" data-level="10.1.7" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#sub-setting-variables"><i class="fa fa-check"></i><b>10.1.7</b> Sub-setting variables</a></li>
<li class="chapter" data-level="10.1.8" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#translating-dplyr-code-to-sql-queries"><i class="fa fa-check"></i><b>10.1.8</b> Translating <code>dplyr</code> code to <code>SQL</code> queries</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#examining-a-single-table-with-r"><i class="fa fa-check"></i><b>10.2</b> Examining a single table with R</a><ul>
<li class="chapter" data-level="10.2.1" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#str---a-base-package-workhorse"><i class="fa fa-check"></i><b>10.2.1</b> <code>str</code> - a base package workhorse</a></li>
<li class="chapter" data-level="10.2.2" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#always-look-at-your-data-with-head-view-or-kable"><i class="fa fa-check"></i><b>10.2.2</b> Always <strong>look</strong> at your data with <code>head</code>, <code>View</code>, or <code>kable</code></a></li>
<li class="chapter" data-level="10.2.3" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#the-summary-function-in-base"><i class="fa fa-check"></i><b>10.2.3</b> The <code>summary</code> function in base</a></li>
<li class="chapter" data-level="10.2.4" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#the-glimpse-function-in-the-tibble-package"><i class="fa fa-check"></i><b>10.2.4</b> The <code>glimpse</code> function in the <code>tibble</code> package</a></li>
<li class="chapter" data-level="10.2.5" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#the-skim-function-in-the-skimr-package"><i class="fa fa-check"></i><b>10.2.5</b> The <code>skim</code> function in the <code>skimr</code> package</a></li>
<li class="chapter" data-level="10.2.6" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#close-the-connection-and-shut-down-sql-pet"><i class="fa fa-check"></i><b>10.2.6</b> Close the connection and shut down sql-pet</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="introduction-to-dbms-queries-11a.html"><a href="introduction-to-dbms-queries-11a.html#additional-reading"><i class="fa fa-check"></i><b>10.3</b> Additional reading</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html"><i class="fa fa-check"></i><b>11</b> Lazy Evaluation and Lazy Queries (11b)</a><ul>
<li class="chapter" data-level="11.1" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#this-chapter"><i class="fa fa-check"></i><b>11.1</b> This chapter:</a><ul>
<li class="chapter" data-level="11.1.1" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#setup"><i class="fa fa-check"></i><b>11.1.1</b> Setup</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#r-is-lazy-and-comes-with-guardrails"><i class="fa fa-check"></i><b>11.2</b> R is lazy and comes with guardrails</a><ul>
<li class="chapter" data-level="11.2.1" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#lazy-loading"><i class="fa fa-check"></i><b>11.2.1</b> Lazy loading</a></li>
<li class="chapter" data-level="11.2.2" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#lazy-evaluation"><i class="fa fa-check"></i><b>11.2.2</b> Lazy evaluation</a></li>
<li class="chapter" data-level="11.2.3" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#lazy-queries"><i class="fa fa-check"></i><b>11.2.3</b> Lazy Queries</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#lazy-evaluation-and-lazy-queries"><i class="fa fa-check"></i><b>11.3</b> Lazy evaluation and lazy queries</a><ul>
<li class="chapter" data-level="11.3.1" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#dplyr-connection-objects"><i class="fa fa-check"></i><b>11.3.1</b> Dplyr connection objects</a></li>
<li class="chapter" data-level="11.3.2" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#using-a-lazy-query"><i class="fa fa-check"></i><b>11.3.2</b> Using a lazy query</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#sql-in-r-markdown"><i class="fa fa-check"></i><b>11.4</b> SQL in R Markdown</a></li>
<li class="chapter" data-level="11.5" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#dbi-package"><i class="fa fa-check"></i><b>11.5</b> DBI Package</a><ul>
<li class="chapter" data-level="11.5.1" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#retrieve-the-whole-table"><i class="fa fa-check"></i><b>11.5.1</b> Retrieve the whole table</a></li>
<li class="chapter" data-level="11.5.2" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#or-a-chunk-at-a-time"><i class="fa fa-check"></i><b>11.5.2</b> Or a chunk at a time</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#dividing-the-work-between-r-on-your-machine-and-the-dbms"><i class="fa fa-check"></i><b>11.6</b> Dividing the work between R on your machine and the DBMS</a><ul>
<li class="chapter" data-level="11.6.1" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#make-the-server-do-as-much-work-as-you-can"><i class="fa fa-check"></i><b>11.6.1</b> Make the server do as much work as you can</a></li>
<li class="chapter" data-level="11.6.2" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#criteria-for-choosing-between-dplyr-and-native-sql"><i class="fa fa-check"></i><b>11.6.2</b> Criteria for choosing between <code>dplyr</code> and native SQL</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="lazy-evaluation-and-lazy-queries-11b.html"><a href="lazy-evaluation-and-lazy-queries-11b.html#other-resources"><i class="fa fa-check"></i><b>11.7</b> Other resources</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html"><i class="fa fa-check"></i><b>12</b> Joins and complex queries (13)</a><ul>
<li class="chapter" data-level="12.1" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#database-constraints"><i class="fa fa-check"></i><b>12.1</b> Database constraints</a></li>
<li class="chapter" data-level="12.2" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#making-up-data-for-join-examples"><i class="fa fa-check"></i><b>12.2</b> Making up data for Join Examples</a><ul>
<li class="chapter" data-level="12.2.1" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#insert-yourself-as-a-new-customer"><i class="fa fa-check"></i><b>12.2.1</b> insert yourself as a new customer</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#joins"><i class="fa fa-check"></i><b>12.3</b> Joins</a><ul>
<li class="chapter" data-level="12.3.1" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#valentines-party"><i class="fa fa-check"></i><b>12.3.1</b> Valentines Party</a></li>
<li class="chapter" data-level="12.3.2" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#join-syntax"><i class="fa fa-check"></i><b>12.3.2</b> Join Syntax</a></li>
<li class="chapter" data-level="12.3.3" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#join-tables"><i class="fa fa-check"></i><b>12.3.3</b> Join Tables</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#natural-join-time-bomb"><i class="fa fa-check"></i><b>12.4</b> Natural Join Time Bomb</a></li>
<li class="chapter" data-level="12.5" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#join-templates"><i class="fa fa-check"></i><b>12.5</b> Join Templates</a><ul>
<li class="chapter" data-level="12.5.1" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#dplyr-inner-join-template"><i class="fa fa-check"></i><b>12.5.1</b> dplyr Inner Join Template</a></li>
<li class="chapter" data-level="12.5.2" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#dplyr-left-outer-join-template"><i class="fa fa-check"></i><b>12.5.2</b> dplyr Left Outer Join Template</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#sql-anti-join-costs"><i class="fa fa-check"></i><b>12.6</b> SQL anti join Costs</a></li>
<li class="chapter" data-level="12.7" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#dplyr-anti-joins"><i class="fa fa-check"></i><b>12.7</b> dplyr Anti joins</a><ul>
<li class="chapter" data-level="12.7.1" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#dplyr-costs"><i class="fa fa-check"></i><b>12.7.1</b> dplyr Costs</a></li>
</ul></li>
<li class="chapter" data-level="12.8" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#exercises-1"><i class="fa fa-check"></i><b>12.8</b> Exercises</a><ul>
<li class="chapter" data-level="12.8.1" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#anti-joins-find-customers-who-have-never-rented-a-movie-take-2."><i class="fa fa-check"></i><b>12.8.1</b> Anti joins – Find customers who have never rented a movie, take 2.</a></li>
<li class="chapter" data-level="12.8.2" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#sql-rows-per-table"><i class="fa fa-check"></i><b>12.8.2</b> SQL Rows Per Table</a></li>
</ul></li>
<li class="chapter" data-level="12.9" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#store-analysis"><i class="fa fa-check"></i><b>12.9</b> Store analysis</a><ul>
<li class="chapter" data-level="12.9.1" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#sql-store-revenue-stream"><i class="fa fa-check"></i><b>12.9.1</b> SQL store revenue stream</a></li>
<li class="chapter" data-level="12.9.2" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#sqlestimate-outstanding-balance"><i class="fa fa-check"></i><b>12.9.2</b> SQL:Estimate Outstanding Balance</a></li>
<li class="chapter" data-level="12.9.3" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#sql-actual-outstanding-balance"><i class="fa fa-check"></i><b>12.9.3</b> SQL actual outstanding balance</a></li>
<li class="chapter" data-level="12.9.4" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#rank-customers-with-highest-open-amounts"><i class="fa fa-check"></i><b>12.9.4</b> Rank customers with highest open amounts</a></li>
<li class="chapter" data-level="12.9.5" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#what-film-has-been-rented-the-most"><i class="fa fa-check"></i><b>12.9.5</b> what film has been rented the most</a></li>
<li class="chapter" data-level="12.9.6" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#what-film-has-been-generated-the-most-revenue-assuming-all-amounts-are-collected"><i class="fa fa-check"></i><b>12.9.6</b> what film has been generated the most revenue assuming all amounts are collected</a></li>
<li class="chapter" data-level="12.9.7" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#which-films-are-in-one-store-but-not-the-other."><i class="fa fa-check"></i><b>12.9.7</b> which films are in one store but not the other.</a></li>
<li class="chapter" data-level="12.9.8" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#compute-the-outstanding-balance."><i class="fa fa-check"></i><b>12.9.8</b> Compute the outstanding balance.</a></li>
</ul></li>
<li class="chapter" data-level="12.10" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#different-strategies-for-interacting-with-the-database"><i class="fa fa-check"></i><b>12.10</b> Different strategies for interacting with the database</a><ul>
<li class="chapter" data-level="12.10.1" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#use-dbgetquery"><i class="fa fa-check"></i><b>12.10.1</b> Use dbGetQuery</a></li>
<li class="chapter" data-level="12.10.2" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#use-dbexecute"><i class="fa fa-check"></i><b>12.10.2</b> Use dbExecute</a></li>
<li class="chapter" data-level="12.10.3" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#anti-join-find-sophie-who-has-never-rented-a-movie."><i class="fa fa-check"></i><b>12.10.3</b> Anti join – Find Sophie who has never rented a movie.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html"><i class="fa fa-check"></i><b>13</b> SQL Quick start - simple retrieval (15)</a><ul>
<li class="chapter" data-level="13.1" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#intro"><i class="fa fa-check"></i><b>13.1</b> Intro</a></li>
<li class="chapter" data-level="13.2" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#databases-and-third-normal-form---3nf"><i class="fa fa-check"></i><b>13.2</b> Databases and Third Normal Form - 3NF</a></li>
<li class="chapter" data-level="13.3" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#sql-commands"><i class="fa fa-check"></i><b>13.3</b> SQL Commands</a></li>
<li class="chapter" data-level="13.4" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#sql-select-quick-start"><i class="fa fa-check"></i><b>13.4</b> SQL SELECT Quick Start</a><ul>
<li class="chapter" data-level="13.4.1" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#select-clause-column-selection-vertical-partioning-of-data"><i class="fa fa-check"></i><b>13.4.1</b> SELECT Clause: Column Selection – Vertical Partioning of Data</a></li>
<li class="chapter" data-level="13.4.2" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#sql-comments"><i class="fa fa-check"></i><b>13.4.2</b> SQL Comments</a></li>
<li class="chapter" data-level="13.4.3" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#from-clause"><i class="fa fa-check"></i><b>13.4.3</b> FROM Clause</a></li>
<li class="chapter" data-level="13.4.4" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#where-clause-row-selection-horizontal-partitioning-of-data"><i class="fa fa-check"></i><b>13.4.4</b> WHERE Clause: Row Selection – Horizontal Partitioning of Data</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#paradigm-shift-from-r-dplyr-to-sql"><i class="fa fa-check"></i><b>13.5</b> Paradigm Shift from R-Dplyr to SQL</a><ul>
<li class="chapter" data-level="13.5.1" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#big-bang-versus-piped-incremental-steps."><i class="fa fa-check"></i><b>13.5.1</b> Big bang versus piped incremental steps.</a></li>
<li class="chapter" data-level="13.5.2" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#sql-execution-order"><i class="fa fa-check"></i><b>13.5.2</b> SQL Execution Order</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html"><i class="fa fa-check"></i><b>14</b> Getting metadata about and from the database (21)</a><ul>
<li class="chapter" data-level="14.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#database-contents-and-structure"><i class="fa fa-check"></i><b>14.1</b> Database contents and structure</a><ul>
<li class="chapter" data-level="14.1.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#database-structure"><i class="fa fa-check"></i><b>14.1.1</b> Database structure</a></li>
<li class="chapter" data-level="14.1.2" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#contents-of-the-information_schema"><i class="fa fa-check"></i><b>14.1.2</b> Contents of the <code>information_schema</code></a></li>
<li class="chapter" data-level="14.1.3" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#what-tables-are-in-the-database"><i class="fa fa-check"></i><b>14.1.3</b> What tables are in the database?</a></li>
<li class="chapter" data-level="14.1.4" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#digging-into-the-information_schema"><i class="fa fa-check"></i><b>14.1.4</b> Digging into the <code>information_schema</code></a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#what-columns-do-those-tables-contain"><i class="fa fa-check"></i><b>14.2</b> What columns do those tables contain?</a><ul>
<li class="chapter" data-level="14.2.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#what-is-the-difference-between-a-view-and-a-base-table"><i class="fa fa-check"></i><b>14.2.1</b> What is the difference between a <code>VIEW</code> and a <code>BASE TABLE</code>?</a></li>
<li class="chapter" data-level="14.2.2" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#what-data-types-are-found-in-the-database"><i class="fa fa-check"></i><b>14.2.2</b> What data types are found in the database?</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#characterizing-how-things-are-named"><i class="fa fa-check"></i><b>14.3</b> Characterizing how things are named</a><ul>
<li class="chapter" data-level="14.3.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#counting-columns-and-name-reuse"><i class="fa fa-check"></i><b>14.3.1</b> Counting columns and name reuse</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#database-keys"><i class="fa fa-check"></i><b>14.4</b> Database keys</a><ul>
<li class="chapter" data-level="14.4.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#direct-sql"><i class="fa fa-check"></i><b>14.4.1</b> Direct SQL</a></li>
<li class="chapter" data-level="14.4.2" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#database-keys-with-dplyr"><i class="fa fa-check"></i><b>14.4.2</b> Database keys with dplyr</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#creating-your-own-data-dictionary"><i class="fa fa-check"></i><b>14.5</b> Creating your own data dictionary</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="drilling-into-your-dbms-environment-22.html"><a href="drilling-into-your-dbms-environment-22.html"><i class="fa fa-check"></i><b>15</b> Drilling into your DBMS environment (22)</a><ul>
<li class="chapter" data-level="15.1" data-path="drilling-into-your-dbms-environment-22.html"><a href="drilling-into-your-dbms-environment-22.html#which-database"><i class="fa fa-check"></i><b>15.1</b> Which database?</a></li>
<li class="chapter" data-level="15.2" data-path="drilling-into-your-dbms-environment-22.html"><a href="drilling-into-your-dbms-environment-22.html#how-many-databases-reside-in-the-docker-container"><i class="fa fa-check"></i><b>15.2</b> How many databases reside in the Docker Container?</a></li>
<li class="chapter" data-level="15.3" data-path="drilling-into-your-dbms-environment-22.html"><a href="drilling-into-your-dbms-environment-22.html#which-schema"><i class="fa fa-check"></i><b>15.3</b> Which Schema?</a></li>
<li class="chapter" data-level="15.4" data-path="drilling-into-your-dbms-environment-22.html"><a href="drilling-into-your-dbms-environment-22.html#exercises-2"><i class="fa fa-check"></i><b>15.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="explain-queries-71.html"><a href="explain-queries-71.html"><i class="fa fa-check"></i><b>16</b> Explain queries (71)</a><ul>
<li class="chapter" data-level="16.1" data-path="explain-queries-71.html"><a href="explain-queries-71.html#performance-considerations"><i class="fa fa-check"></i><b>16.1</b> Performance considerations</a></li>
<li class="chapter" data-level="16.2" data-path="explain-queries-71.html"><a href="explain-queries-71.html#clean-up-2"><i class="fa fa-check"></i><b>16.2</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="sql-queries-behind-the-scenes-72.html"><a href="sql-queries-behind-the-scenes-72.html"><i class="fa fa-check"></i><b>17</b> SQL queries behind the scenes (72)</a><ul>
<li class="chapter" data-level="17.1" data-path="sql-queries-behind-the-scenes-72.html"><a href="sql-queries-behind-the-scenes-72.html#sql-execution-steps"><i class="fa fa-check"></i><b>17.1</b> SQL Execution Steps</a></li>
<li class="chapter" data-level="17.2" data-path="sql-queries-behind-the-scenes-72.html"><a href="sql-queries-behind-the-scenes-72.html#passing-values-to-sql-statements"><i class="fa fa-check"></i><b>17.2</b> Passing values to SQL statements</a></li>
<li class="chapter" data-level="17.3" data-path="sql-queries-behind-the-scenes-72.html"><a href="sql-queries-behind-the-scenes-72.html#pass-multiple-sets-of-values-with-dbbind"><i class="fa fa-check"></i><b>17.3</b> Pass multiple sets of values with dbBind():</a></li>
<li class="chapter" data-level="17.4" data-path="sql-queries-behind-the-scenes-72.html"><a href="sql-queries-behind-the-scenes-72.html#clean-up-3"><i class="fa fa-check"></i><b>17.4</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="writing-to-the-dbms-73.html"><a href="writing-to-the-dbms-73.html"><i class="fa fa-check"></i><b>18</b> Writing to the DBMS (73)</a><ul>
<li class="chapter" data-level="18.1" data-path="writing-to-the-dbms-73.html"><a href="writing-to-the-dbms-73.html#create-a-new-table"><i class="fa fa-check"></i><b>18.1</b> Create a new table</a></li>
<li class="chapter" data-level="18.2" data-path="writing-to-the-dbms-73.html"><a href="writing-to-the-dbms-73.html#modify-an-existing-table"><i class="fa fa-check"></i><b>18.2</b> Modify an existing table</a></li>
<li class="chapter" data-level="18.3" data-path="writing-to-the-dbms-73.html"><a href="writing-to-the-dbms-73.html#remove-table-and-clean-up"><i class="fa fa-check"></i><b>18.3</b> Remove table and Clean up</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="other-resources-89.html"><a href="other-resources-89.html"><i class="fa fa-check"></i><b>A</b> Other resources (89)</a><ul>
<li class="chapter" data-level="A.1" data-path="other-resources-89.html"><a href="other-resources-89.html#editing-this-book"><i class="fa fa-check"></i><b>A.1</b> Editing this book</a></li>
<li class="chapter" data-level="A.2" data-path="other-resources-89.html"><a href="other-resources-89.html#docker-alternatives"><i class="fa fa-check"></i><b>A.2</b> Docker alternatives</a></li>
<li class="chapter" data-level="A.3" data-path="other-resources-89.html"><a href="other-resources-89.html#docker-and-r"><i class="fa fa-check"></i><b>A.3</b> Docker and R</a></li>
<li class="chapter" data-level="A.4" data-path="other-resources-89.html"><a href="other-resources-89.html#documentation-for-docker-and-postgres"><i class="fa fa-check"></i><b>A.4</b> Documentation for Docker and Postgres</a></li>
<li class="chapter" data-level="A.5" data-path="other-resources-89.html"><a href="other-resources-89.html#sql-and-dplyr"><i class="fa fa-check"></i><b>A.5</b> SQL and dplyr</a></li>
<li class="chapter" data-level="A.6" data-path="other-resources-89.html"><a href="other-resources-89.html#more-resources"><i class="fa fa-check"></i><b>A.6</b> More Resources</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="mapping-your-local-environment-92.html"><a href="mapping-your-local-environment-92.html"><i class="fa fa-check"></i><b>B</b> Mapping your local environment (92)</a><ul>
<li class="chapter" data-level="B.1" data-path="mapping-your-local-environment-92.html"><a href="mapping-your-local-environment-92.html#environment-tools-used-in-this-chapter"><i class="fa fa-check"></i><b>B.1</b> Environment Tools Used in this Chapter</a></li>
<li class="chapter" data-level="B.2" data-path="mapping-your-local-environment-92.html"><a href="mapping-your-local-environment-92.html#communicating-with-docker-applications"><i class="fa fa-check"></i><b>B.2</b> Communicating with Docker Applications</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="creating-the-sql-pet-docker-container-one-step-at-a-time-93.html"><a href="creating-the-sql-pet-docker-container-one-step-at-a-time-93.html"><i class="fa fa-check"></i><b>C</b> Creating the sql-pet Docker container one step at a time (93)</a><ul>
<li class="chapter" data-level="C.1" data-path="creating-the-sql-pet-docker-container-one-step-at-a-time-93.html"><a href="creating-the-sql-pet-docker-container-one-step-at-a-time-93.html#overview-1"><i class="fa fa-check"></i><b>C.1</b> Overview</a></li>
<li class="chapter" data-level="C.2" data-path="creating-the-sql-pet-docker-container-one-step-at-a-time-93.html"><a href="creating-the-sql-pet-docker-container-one-step-at-a-time-93.html#download-the-dvdrental-backup-file"><i class="fa fa-check"></i><b>C.2</b> Download the <code>dvdrental</code> backup file</a></li>
<li class="chapter" data-level="C.3" data-path="creating-the-sql-pet-docker-container-one-step-at-a-time-93.html"><a href="creating-the-sql-pet-docker-container-one-step-at-a-time-93.html#build-the-docker-container"><i class="fa fa-check"></i><b>C.3</b> Build the Docker Container</a></li>
<li class="chapter" data-level="C.4" data-path="creating-the-sql-pet-docker-container-one-step-at-a-time-93.html"><a href="creating-the-sql-pet-docker-container-one-step-at-a-time-93.html#create-the-database-and-restore-from-the-backup"><i class="fa fa-check"></i><b>C.4</b> Create the database and restore from the backup</a></li>
<li class="chapter" data-level="C.5" data-path="creating-the-sql-pet-docker-container-one-step-at-a-time-93.html"><a href="creating-the-sql-pet-docker-container-one-step-at-a-time-93.html#connect-to-the-database-with-r"><i class="fa fa-check"></i><b>C.5</b> Connect to the database with R</a></li>
<li class="chapter" data-level="C.6" data-path="creating-the-sql-pet-docker-container-one-step-at-a-time-93.html"><a href="creating-the-sql-pet-docker-container-one-step-at-a-time-93.html#cleaning-up-1"><i class="fa fa-check"></i><b>C.6</b> Cleaning up</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="appendix-d-quick-guide-to-sql-94.html"><a href="appendix-d-quick-guide-to-sql-94.html"><i class="fa fa-check"></i><b>D</b> APPENDIX D - Quick Guide to SQL (94)</a></li>
<li class="chapter" data-level="E" data-path="additional-technical-details-for-windows-users-95.html"><a href="additional-technical-details-for-windows-users-95.html"><i class="fa fa-check"></i><b>E</b> Additional technical details for Windows users (95)</a><ul>
<li class="chapter" data-level="E.1" data-path="additional-technical-details-for-windows-users-95.html"><a href="additional-technical-details-for-windows-users-95.html#docker-for-windows-settings"><i class="fa fa-check"></i><b>E.1</b> Docker for Windows settings</a><ul>
<li class="chapter" data-level="E.1.1" data-path="additional-technical-details-for-windows-users-95.html"><a href="additional-technical-details-for-windows-users-95.html#shared-drives"><i class="fa fa-check"></i><b>E.1.1</b> Shared drives</a></li>
<li class="chapter" data-level="E.1.2" data-path="additional-technical-details-for-windows-users-95.html"><a href="additional-technical-details-for-windows-users-95.html#kubernetes"><i class="fa fa-check"></i><b>E.1.2</b> Kubernetes</a></li>
</ul></li>
<li class="chapter" data-level="E.2" data-path="additional-technical-details-for-windows-users-95.html"><a href="additional-technical-details-for-windows-users-95.html#git-github-and-line-endings"><i class="fa fa-check"></i><b>E.2</b> Git, GitHub and line endings</a></li>
</ul></li>
<li class="chapter" data-level="F" data-path="dplyr-functions-and-sql-cross-walk-96.html"><a href="dplyr-functions-and-sql-cross-walk-96.html"><i class="fa fa-check"></i><b>F</b> Dplyr functions and SQL cross-walk (96)</a></li>
<li class="chapter" data-level="G" data-path="dbi-package-functions-coverage-96b.html"><a href="dbi-package-functions-coverage-96b.html"><i class="fa fa-check"></i><b>G</b> DBI package functions - coverage (96b)</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R, Databases and Docker</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="mapping-your-local-environment-10" class="section level1">
<h1><span class="header-section-number">Chapter 9</span> Mapping your local environment (10)</h1>
<blockquote>
<p>This chapter explores:</p>
<ul>
<li>The different elements of your environment that are involved in running the examples in this book</li>
<li>What the different roles that each element plays in your environment</li>
<li>How those elements are connected and how you can send messages from one to another</li>
<li>How each element has its own language / set of commands</li>
</ul>
</blockquote>
<p>These packages are used in this chapter:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb57-2" data-line-number="2"><span class="kw">library</span>(DBI)</a>
<a class="sourceLine" id="cb57-3" data-line-number="3"><span class="kw">library</span>(RPostgres)</a>
<a class="sourceLine" id="cb57-4" data-line-number="4"><span class="kw">require</span>(knitr)</a>
<a class="sourceLine" id="cb57-5" data-line-number="5"><span class="kw">library</span>(dbplyr)</a>
<a class="sourceLine" id="cb57-6" data-line-number="6"><span class="kw">library</span>(sqlpetr)</a>
<a class="sourceLine" id="cb57-7" data-line-number="7"><span class="kw">library</span>(DiagrammeR)</a>
<a class="sourceLine" id="cb57-8" data-line-number="8">display_rows &lt;-<span class="st"> </span><span class="dv">5</span></a></code></pre></div>
<div id="set-up-docker-environment" class="section level2">
<h2><span class="header-section-number">9.1</span> Set up docker environment</h2>
<p>Assume that the Docker container with PostgreSQL and the dvdrental database are ready to go. Start up the <code>docker-pet</code> container:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1"><span class="kw">sp_docker_start</span>(<span class="st">&quot;sql-pet&quot;</span>)</a></code></pre></div>
<p>Now connect to the <code>dvdrental</code> database with R.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1">con &lt;-<span class="st"> </span><span class="kw">sp_get_postgres_connection</span>(</a>
<a class="sourceLine" id="cb59-2" data-line-number="2">  <span class="dt">user =</span> <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_USER_NAME&quot;</span>),</a>
<a class="sourceLine" id="cb59-3" data-line-number="3">  <span class="dt">password =</span> <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_PASSWORD&quot;</span>),</a>
<a class="sourceLine" id="cb59-4" data-line-number="4">  <span class="dt">dbname =</span> <span class="st">&quot;dvdrental&quot;</span>,</a>
<a class="sourceLine" id="cb59-5" data-line-number="5">  <span class="dt">seconds_to_test =</span> <span class="dv">10</span></a>
<a class="sourceLine" id="cb59-6" data-line-number="6">)</a></code></pre></div>
</div>
<div id="tutorial-environment" class="section level2">
<h2><span class="header-section-number">9.2</span> Tutorial Environment</h2>
<p>Here is an overview of your environment. In this chapter we explore what these pieces are, how they are connected, what commands send a message from one environment to another, and some pass-through commands that take two hops at a time. You can skip this chapter and come back later when you are curious about the setup that we’re using in this book.</p>
<center>
<img src="screenshots/your-environment-diagram.png" />
</center>
<div id="each-element-in-turn-and-what-elements-it-can-communicate-with" class="section level3">
<h3><span class="header-section-number">9.2.1</span> each element in turn and what elements it can communicate with</h3>
</div>
<div id="rstudio" class="section level3">
<h3><span class="header-section-number">9.2.2</span> Rstudio</h3>
<p>You communicate with Rstudio, which can send commands to both R and to Unix (via the terminal pane or via R). On a Unix or Mac computer, you communicate with <code>bash</code>.</p>
</div>
<div id="unix-command-interpreter-on-your-computer" class="section level3">
<h3><span class="header-section-number">9.2.3</span> Unix (command interpreter on your computer)</h3>
<p>You can type <code>bash</code> commands in a terminal window directly. Called command prompt on Windows. Unix can communicate with the Docker client, which can start and stop the Docker server and load containers with programs such as Unix, postgreSQL, etc.</p>
</div>
<div id="r" class="section level3">
<h3><span class="header-section-number">9.2.4</span> R</h3>
<p>R processes instructions from Rstudio. It can send instructions to Unix via the <code>system2</code> function. R talks directly to postgreSQL through the DBI package.</p>
<p>Connecting to the database should be a simple task, but often turns out to take a lot of time to actually get it to work. We assume that your final write ups are done in some flavor of an Rmd document and others will have access to the database to confirm or further your analysis.</p>
<p>One focus of this tutorial is SQL processing through a dbConnection and we will come back to this in a future section. The remainder of this section focuses on some specific Docker commands.</p>
</div>
<div id="docker-client" class="section level3">
<h3><span class="header-section-number">9.2.5</span> Docker client</h3>
<p>The docker client receives instructions from your local Unix program. Sets up the Docker server, loads containers, and passes instructions from Unix to the programs running in the Docker server. See more about the <a href="https://docs.docker.com/engine/docker-overview/#the-docker-platform">Docker environment</a>.</p>
<p>Docker has about 44 commands. We are interested in only those related to Postgres status, started, stopped, and available. In this tutorial, complete docker commands are printed out before being executed via a <code>system2</code> call. In the event that a code block fails, one can copy and paste the docker command into your local CLI and see if Docker is returning additional information.</p>
<p>Typing <code>docker</code> at the terminal command line will print up a summary of all available <code>docker</code> commands. Below are the docker commands used in the exercises.</p>
<pre><code>Commands:
  ps          List containers
  start       Start one or more stopped containers
  stop        Stop one or more running containers</code></pre>
<p>The general format for a Docker command is</p>
<pre><code>docker [OPTIONS] COMMAND ARGUMENTS</code></pre>
<p>Below is the output for the Docker exec help command which was used in the <code>bash</code> and <code>psql</code> command examples above and for an exercise below.</p>
<pre><code>$ docker help exec

Usage:  docker exec [OPTIONS] CONTAINER COMMAND [ARG...]

Run a command in a running container

Options:
  -d, --detach               Detached mode: run command in the background
      --detach-keys string   Override the key sequence for detaching a
                             container
  -e, --env list             Set environment variables
  -i, --interactive          Keep STDIN open even if not attached
      --privileged           Give extended privileges to the command
  -t, --tty                  Allocate a pseudo-TTY
  -u, --user string          Username or UID (format:
                             &lt;name|uid&gt;[:&lt;group|gid&gt;])
  -w, --workdir string       Working directory inside the container</code></pre>
</div>
<div id="bash-inside-docker" class="section level3">
<h3><span class="header-section-number">9.2.6</span> bash (inside Docker)</h3>
<p>Since Mac and Linux users run a version of Linux already, they may want to poke around the Docker environment directly from the bash command line interface (CLI). Below is the CLI command to start up a bash session, execute a version of hello world, and exit the <code>bash</code> session.</p>
<p>(In this and subsequent example, an initial <code>$</code> represents your system prompt, which varies according to operating system and local environment.)</p>
<p>In your computer’s command prompt:</p>
<p><code>$ docker exec -ti sql-pet bash</code></p>
<p>Inside the <code>bash</code> (UNIX command) environment:</p>
<pre><code>$ echo &quot;hello world!&quot; </code></pre>
<p>The system echoes back:</p>
<pre><code>Hello world!
$</code></pre>
<p>To execute the same thing in the Docker’s version of Unix, send the following command from your local terminal to the Docker client, which sends it to the bash interpreter:</p>
<pre><code>docker exec -ti sql-pet echo &quot;hello&quot;</code></pre>
</div>
<div id="psql-inside-docker" class="section level3">
<h3><span class="header-section-number">9.2.7</span> psql (inside Docker)</h3>
<p>For users comfortable executing SQL from a command line directly against the database, can run the <code>psql</code> application directly. Below is the CLI command to start up <code>psql</code> session, execute a version of hello world, and quitting the <code>psql</code> version.</p>
<p>In your computer’s command prompt:</p>
<p><code>$ docker exec -ti sql-pet psql -a -p 5432 -d dvdrental -U postgres</code></p>
<p>That executes a postreSQL program in docker called <code>psql</code>, which is a command line interface to postgreSQL. <code>psql</code> responds with:</p>
<pre><code>psql (10.5 (Debian 10.5-1.pgdg90+1))
Type &quot;help&quot; for help.</code></pre>
<p>To exit, you enter:</p>
<pre><code>dvdrental-#\q</code></pre>
<ul>
<li><p>To explore the PostgreSQL environment it’s worth browsing around inside the Docker command with a shell.</p>
<ul>
<li><p>To run the Docker container that contains PostgreSQL, you can enter this from a command prompt:</p>
<p><code>$ docker exec -ti pet sh</code></p></li>
<li><p>To exit Docker enter:</p>
<p><code># exit</code></p></li>
<li><p>Inside Docker, you can enter the PostgreSQL command-line utility psql by entering</p>
<p><code># psql -U postgres</code></p>
<p>Handy <a href="https://gpdb.docs.pivotal.io/gs/43/pdf/PSQLQuickRef.pdf">psql commands</a> include:</p>
<ul>
<li><code>postgres=# \h</code> # psql help</li>
<li><code>postgres=# \dt</code> # list PostgreSQL tables</li>
<li><code>postgres=# \c dbname</code> # connect to databse dbname</li>
<li><code>postgres=# \l</code> # list PostgreSQL databases</li>
<li><code>postgres=# \conninfo</code> # display information about current connection</li>
<li><code>postgres=# \q</code> # exit psql</li>
</ul></li>
</ul></li>
</ul>
<p>To exit <code>psql</code>, enter:</p>
<pre><code>    \q</code></pre>
<p>The docker bash and psql command options are optional for this tutorial, but open up a gateway to some very powerful programming techniques for future exploration.</p>
</div>
<div id="postgresql-inside-docker" class="section level3">
<h3><span class="header-section-number">9.2.8</span> postgreSQL (inside Docker)</h3>
<p>The postreSQL database is a whole environment unto itself. It can receive instructions from bash, psql, and it will respond to <code>DBI</code> queries from R on port 5282.</p>
</div>
</div>
<div id="command-structure" class="section level2">
<h2><span class="header-section-number">9.3</span> command structure</h2>
<p>We use two trivial commands to explore the various <em>interfaces</em>. <code>ls -l</code> is the unix command for listing information about a file and <code>\du</code> is the psql command to list the users that exist in postgreSQL.</p>
<p>Your OS and the OS inside docker may be looking at the same file but they are in different time zones.</p>
<div id="get-info-on-a-local-file-from-r-code" class="section level3">
<h3><span class="header-section-number">9.3.1</span> Get info on a local file from R code</h3>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1"><span class="kw">file.info</span>(<span class="st">&quot;README.md&quot;</span>)</a></code></pre></div>
<pre><code>##           size isdir mode               mtime               ctime
## README.md 4973 FALSE  644 2018-11-01 14:23:56 2018-11-01 14:23:56
##                         atime uid gid uname grname
## README.md 2018-12-07 17:56:52 502  80   jds  admin</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1"><span class="co"># Or, using the system2 command:</span></a>
<a class="sourceLine" id="cb71-2" data-line-number="2"></a>
<a class="sourceLine" id="cb71-3" data-line-number="3"><span class="kw">system2</span>(<span class="st">&quot;ls&quot;</span>,  <span class="st">&quot;-l README.md&quot;</span>, <span class="dt">stdout =</span> <span class="ot">TRUE</span>, <span class="dt">stderr =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## [1] &quot;-rw-r--r--  1 jds  admin  4973 Nov  1 14:23 README.md&quot;</code></pre>
</div>
<div id="get-info-on-the-same-os-file-inside-docker-from-r-code" class="section level3">
<h3><span class="header-section-number">9.3.2</span> Get info on the same OS file inside Docker from R Code</h3>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1"><span class="kw">system2</span>(<span class="st">&quot;docker&quot;</span>, <span class="st">&quot;exec sql-pet ls -l petdir/README.md&quot;</span>, <span class="dt">stdout =</span> <span class="ot">TRUE</span>, <span class="dt">stderr =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## Warning in system2(&quot;docker&quot;, &quot;exec sql-pet ls -l petdir/README.md&quot;, stdout
## = TRUE, : running command &#39;&#39;docker&#39; exec sql-pet ls -l petdir/README.md 2&gt;/
## dev/null&#39; had status 2</code></pre>
<pre><code>## character(0)
## attr(,&quot;status&quot;)
## [1] 2</code></pre>
</div>
<div id="list-postgresql-users-from-rstudio-terminal-simulated" class="section level3">
<h3><span class="header-section-number">9.3.3</span> List postgreSQL users from Rstudio terminal (simulated)</h3>
<p>We can’t show exactly what a terminal session looks like in this R Markdown book, so we resort to representing it indirectly.</p>
<p>To get a unix command line <em>inside the sql-pet Docker environment</em>, enter this command:</p>
<blockquote>
<p><code>$ docker exec -it sql-pet bash</code></p>
</blockquote>
<p>The <code>$</code> represents the unix command prompt in your R Studio terminal session. The unix command prompt inside Docker in this case is <code>root@ce265d6e5361:/#</code>. A trivial Unix command to get the date therefore is:</p>
<blockquote>
<p><code>root@ce265d6e5361:/# date</code></p>
<p><code>Fri Nov 30 00:29:04 UTC 2018</code></p>
</blockquote>
<p>From that unix command prompt you can also enter the <code>psql</code> app (which has sit’s own command line interface). Execute the postgreSQL comand line program <code>psql</code>, logging on as <code>postgres</code>, and show a list of users:</p>
<blockquote>
<p><code>root@ce265d6e5361:/# psql -U postgres -c '\du'</code>
<code>psql</code> returns:</p>
</blockquote>
<blockquote>
<pre><code>                               List of roles</code></pre>
<table>
<thead>
<tr class="header">
<th><code>Role name</code></th>
<th><code>Attributes</code></th>
<th><code>Member of</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>postgres</code></td>
<td><code>Superuser, Create role, Create DB, Replication, Bypass RLS</code></td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
</blockquote>
<p>To exit unix inside the Docker container, enter <code>exit</code>:</p>
<blockquote>
<p><code>root@ce265d6e5361:/# exit</code></p>
<p><code>exit</code></p>
<p>We are then back to the R Studio terminal command:</p>
</blockquote>
<blockquote>
<p><code>$</code></p>
</blockquote>
</div>
<div id="list-postgresql-users-from-r-code" class="section level3">
<h3><span class="header-section-number">9.3.4</span> List postgreSQL users from R code</h3>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1"><span class="kw">system2</span>(<span class="st">&quot;docker&quot;</span>, <span class="st">&quot;exec sql-pet psql -U postgres -c &#39;</span><span class="ch">\\</span><span class="st">du&#39; &quot;</span>, </a>
<a class="sourceLine" id="cb77-2" data-line-number="2">        <span class="dt">stdout =</span> <span class="ot">TRUE</span>, <span class="dt">stderr =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## [1] &quot;                                   List of roles&quot;                                    
## [2] &quot; Role name |                         Attributes                         | Member of &quot;
## [3] &quot;-----------+------------------------------------------------------------+-----------&quot;
## [4] &quot; postgres  | Superuser, Create role, Create DB, Replication, Bypass RLS | {}&quot;        
## [5] &quot;&quot;</code></pre>
<table>
<colgroup>
<col width="42%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="11%" />
<col width="11%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th>Example</th>
<th>R</th>
<th>OS</th>
<th>Docker</th>
<th>Alpine container</th>
<th>pg_restore / ls</th>
<th>postgreSQL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>-U postgres <br />-d dvdrental <br />petdir/dvdrental.tar</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><img src="screenshots/arrow-right.png" /></td>
<td>——–*</td>
</tr>
<tr class="even">
<td>ls petdir | <br />grep “dvdrental.tar”</td>
<td></td>
<td></td>
<td></td>
<td>|——-&gt;</td>
<td>——–*</td>
<td></td>
</tr>
<tr class="odd">
<td>exec sql-pet <br />ls petdir | <br />grep &quot;dvdrental.tar</td>
<td></td>
<td></td>
<td>|——-&gt;</td>
<td>———</td>
<td>——–*</td>
<td></td>
</tr>
<tr class="even">
<td>docker <br />exec sql-pet <br />ls petdir | <br />grep “dvdrental.tar”</td>
<td></td>
<td>|——-&gt;</td>
<td>———</td>
<td>———</td>
<td>——–*</td>
<td></td>
</tr>
<tr class="odd">
<td>system2(‘docker’, <br />‘exec sql-pet <br />ls petdir | <br />grep “dvdrental.tar”’, <br />stdout = TRUE, <br />stderr = TRUE)</td>
<td>|——-&gt;</td>
<td>———</td>
<td>———</td>
<td>———</td>
<td>——–*</td>
<td></td>
</tr>
</tbody>
</table>
<p><code>docker exec sql-pet ls -l petdir/README.md</code>
<code>docker exec -it sql-pet psql -U postgres -c '\l'</code></p>
</div>
</div>
<div id="exercises" class="section level2">
<h2><span class="header-section-number">9.4</span> Exercises</h2>
<p>Docker containers have a small foot print. In our container, we are running a limited Linux kernel and a Postgres database. To show how tiny the docker environment is, we will look at all the processes running inside Docker and the top level file structure.</p>
<p>In the following exercies, use the <code>-i</code> option and the CONTAINER = <code>sql-pet</code>.</p>
</div>
<div id="dynamic-environment-graph" class="section level2">
<h2><span class="header-section-number">9.5</span> Dynamic environment graph</h2>
<p>Below is a high level diagram of our tutorial environment. The single black or blue boxed items are the apps running on your PC, (Linux, Mac, Windows), RStudio, R, Docker, and CLI, a command line interface. The red boxed items are the versions of the applications shown. The labels are to the right of the line.</p>
<p>Start up R/RStudio and convert the CLI command to an R/RStudio command</p>
<table>
<colgroup>
<col width="2%" />
<col width="21%" />
<col width="34%" />
<col width="23%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th>#</th>
<th>Question</th>
<th>Docker CLI Command</th>
<th>R RStudio command</th>
<th>Local Command LINE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>How many processes are running inside the Docker container?</td>
<td>docker exec -i sql-pet ps -eF</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>1a</td>
<td>How many process are running on your local machine?</td>
<td></td>
<td></td>
<td>widows: tasklist Mac/Linux: ps -ef</td>
</tr>
<tr class="odd">
<td>2</td>
<td>What is the total number of files and directories in Docker?</td>
<td>docker exec -i sql-pet ls -al</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>2a</td>
<td>What is the total number of files and directories on your local machine?</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Is Docker Running?</td>
<td>docker version</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>3a</td>
<td>What are your Client and Server Versions?</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>4</td>
<td>Does Postgres exist in the container?</td>
<td>docker ps -a</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>4a</td>
<td>What is the status of Postgres?</td>
<td>docker ps -a</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>4b</td>
<td>What is the size of Postgres?</td>
<td>docker images</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>4c</td>
<td>What is the size of your laptop OS</td>
<td></td>
<td></td>
<td><a href="https://www.quora.com/What-is-the-actual-size-of-Windows-10-ISO-file" class="uri">https://www.quora.com/What-is-the-actual-size-of-Windows-10-ISO-file</a></td>
</tr>
<tr class="odd">
<td>5</td>
<td>If sql-pet status is Up, How do I stop it?</td>
<td>docker stop sql-pet</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>5a</td>
<td>If sql-pet status is Exited, How do I start it?</td>
<td>docker start sql-pet</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><img src="diagrams/envgraph.png" /><!-- --></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="securing-and-using-your-dbms-credentials-05b.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduction-to-dbms-queries-11a.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/smithjd/sql-pet/edit/master/10-environment_diagram.Rmd",
"text": "Edit"
},
"download": ["r-database-docker.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
