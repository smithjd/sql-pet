<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R, Databases and Docker</title>
  <meta name="description" content="A collection of tutorials for integrating R with databases using Docker">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R, Databases and Docker" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A collection of tutorials for integrating R with databases using Docker" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R, Databases and Docker" />
  
  <meta name="twitter:description" content="A collection of tutorials for integrating R with databases using Docker" />
  

<meta name="author" content="Dipti Muni, Ian Frantz, John David Smith, Mary Anne Thygesen, M. Edward (Ed) Borasky, Scott Case, and Sophie Yang">


<meta name="date" content="2018-10-25">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="joins-and-complex-queries-13.html">
<link rel="next" href="getting-metadata-about-and-from-the-database-21.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="libs/viz-0.3/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.0/grViz.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.4/datatables.js"></script>
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<script src="libs/d3-3.3.8/d3.min.js"></script>
<script src="libs/dagre-0.4.0/dagre-d3.min.js"></script>
<link href="libs/mermaid-0.3.0/dist/mermaid.css" rel="stylesheet" />
<script src="libs/mermaid-0.3.0/dist/mermaid.slim.min.js"></script>
<script src="libs/chromatography-0.1/chromatography.js"></script>
<script src="libs/DiagrammeR-binding-1.0.0/DiagrammeR.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R, Databases and Docker</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#using-r-to-query-a-dbms-in-your-organization"><i class="fa fa-check"></i><b>1.1</b> Using R to query a DBMS in your organization</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#docker-as-a-tool-for-users"><i class="fa fa-check"></i><b>1.2</b> Docker as a tool for UseRs</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#why-write-a-book-about-dbms-access-from-r-using-docker"><i class="fa fa-check"></i><b>1.3</b> Why write a book about DBMS access from R using Docker?</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#docker-and-r-on-your-machine"><i class="fa fa-check"></i><b>1.4</b> Docker and R on your machine</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#who-are-we"><i class="fa fa-check"></i><b>1.5</b> Who are we?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="how-to-use-this-book-01.html"><a href="how-to-use-this-book-01.html"><i class="fa fa-check"></i><b>2</b> How to use this book (01)</a><ul>
<li class="chapter" data-level="2.1" data-path="how-to-use-this-book-01.html"><a href="how-to-use-this-book-01.html#prerequisites"><i class="fa fa-check"></i><b>2.1</b> Prerequisites</a></li>
<li class="chapter" data-level="2.2" data-path="how-to-use-this-book-01.html"><a href="how-to-use-this-book-01.html#installing-docker"><i class="fa fa-check"></i><b>2.2</b> Installing Docker</a></li>
<li class="chapter" data-level="2.3" data-path="how-to-use-this-book-01.html"><a href="how-to-use-this-book-01.html#download-the-repo"><i class="fa fa-check"></i><b>2.3</b> Download the repo</a></li>
<li class="chapter" data-level="2.4" data-path="how-to-use-this-book-01.html"><a href="how-to-use-this-book-01.html#read-along-experiment-as-you-go"><i class="fa fa-check"></i><b>2.4</b> Read along, experiment as you go</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html"><i class="fa fa-check"></i><b>3</b> Docker Hosting for Windows (02)</a><ul>
<li class="chapter" data-level="3.1" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#hardware-requirements"><i class="fa fa-check"></i><b>3.1</b> Hardware requirements</a></li>
<li class="chapter" data-level="3.2" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#software-requirements"><i class="fa fa-check"></i><b>3.2</b> Software requirements</a><ul>
<li class="chapter" data-level="3.2.1" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#windows-7-8-8.1-and-windows-10-home-64-bit"><i class="fa fa-check"></i><b>3.2.1</b> Windows 7, 8, 8.1 and Windows 10 Home (64 bit)</a></li>
<li class="chapter" data-level="3.2.2" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#windows-10-pro"><i class="fa fa-check"></i><b>3.2.2</b> Windows 10 Pro</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#docker-for-windows-settings"><i class="fa fa-check"></i><b>3.3</b> Docker for Windows settings</a><ul>
<li class="chapter" data-level="3.3.1" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#shared-drives"><i class="fa fa-check"></i><b>3.3.1</b> Shared drives</a></li>
<li class="chapter" data-level="3.3.2" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#kubernetes"><i class="fa fa-check"></i><b>3.3.2</b> Kubernetes</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#git-github-and-line-endings"><i class="fa fa-check"></i><b>3.4</b> Git, GitHub and line endings</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="this-books-learning-goals-and-use-cases-03.html"><a href="this-books-learning-goals-and-use-cases-03.html"><i class="fa fa-check"></i><b>4</b> This Book’s Learning Goals and Use Cases (03)</a><ul>
<li class="chapter" data-level="4.1" data-path="this-books-learning-goals-and-use-cases-03.html"><a href="this-books-learning-goals-and-use-cases-03.html#learning-goals"><i class="fa fa-check"></i><b>4.1</b> Learning Goals</a></li>
<li class="chapter" data-level="4.2" data-path="this-books-learning-goals-and-use-cases-03.html"><a href="this-books-learning-goals-and-use-cases-03.html#imaging-a-dvd-rental-business"><i class="fa fa-check"></i><b>4.2</b> Imaging a DVD rental business</a></li>
<li class="chapter" data-level="4.3" data-path="this-books-learning-goals-and-use-cases-03.html"><a href="this-books-learning-goals-and-use-cases-03.html#use-cases"><i class="fa fa-check"></i><b>4.3</b> Use cases</a></li>
<li class="chapter" data-level="4.4" data-path="this-books-learning-goals-and-use-cases-03.html"><a href="this-books-learning-goals-and-use-cases-03.html#investigating-a-question-using-with-an-organizations-database"><i class="fa fa-check"></i><b>4.4</b> Investigating a question using with an organization’s database</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html"><i class="fa fa-check"></i><b>5</b> Docker, Postgres, and R (04)</a><ul>
<li class="chapter" data-level="5.1" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html#verify-that-docker-is-running"><i class="fa fa-check"></i><b>5.1</b> Verify that Docker is running</a></li>
<li class="chapter" data-level="5.2" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html#clean-up-if-appropriate"><i class="fa fa-check"></i><b>5.2</b> Clean up if appropriate</a></li>
<li class="chapter" data-level="5.3" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html#connect-read-and-write-to-postgres-from-r"><i class="fa fa-check"></i><b>5.3</b> Connect, read and write to Postgres from R</a><ul>
<li class="chapter" data-level="5.3.1" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html#pause-for-some-security-considerations"><i class="fa fa-check"></i><b>5.3.1</b> Pause for some security considerations</a></li>
<li class="chapter" data-level="5.3.2" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html#alternative-put-the-database-password-in-an-environment-file"><i class="fa fa-check"></i><b>5.3.2</b> Alternative: put the database password in an environment file</a></li>
<li class="chapter" data-level="5.3.3" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html#interact-with-postgres"><i class="fa fa-check"></i><b>5.3.3</b> Interact with Postgres</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html#clean-up"><i class="fa fa-check"></i><b>5.4</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="the-dvdrental-database-in-postgres-in-docker-05.html"><a href="the-dvdrental-database-in-postgres-in-docker-05.html"><i class="fa fa-check"></i><b>6</b> The dvdrental database in Postgres in Docker (05)</a><ul>
<li class="chapter" data-level="6.1" data-path="the-dvdrental-database-in-postgres-in-docker-05.html"><a href="the-dvdrental-database-in-postgres-in-docker-05.html#overview"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="the-dvdrental-database-in-postgres-in-docker-05.html"><a href="the-dvdrental-database-in-postgres-in-docker-05.html#verify-that-docker-is-up-and-running"><i class="fa fa-check"></i><b>6.2</b> Verify that Docker is up and running</a></li>
<li class="chapter" data-level="6.3" data-path="the-dvdrental-database-in-postgres-in-docker-05.html"><a href="the-dvdrental-database-in-postgres-in-docker-05.html#clean-up-if-appropriate-1"><i class="fa fa-check"></i><b>6.3</b> Clean up if appropriate</a></li>
<li class="chapter" data-level="6.4" data-path="the-dvdrental-database-in-postgres-in-docker-05.html"><a href="the-dvdrental-database-in-postgres-in-docker-05.html#build-the-docker-image"><i class="fa fa-check"></i><b>6.4</b> Build the Docker Image</a></li>
<li class="chapter" data-level="6.5" data-path="the-dvdrental-database-in-postgres-in-docker-05.html"><a href="the-dvdrental-database-in-postgres-in-docker-05.html#run-the-docker-image"><i class="fa fa-check"></i><b>6.5</b> Run the Docker Image</a></li>
<li class="chapter" data-level="6.6" data-path="the-dvdrental-database-in-postgres-in-docker-05.html"><a href="the-dvdrental-database-in-postgres-in-docker-05.html#connect-to-postgres-with-r"><i class="fa fa-check"></i><b>6.6</b> Connect to Postgres with R</a></li>
<li class="chapter" data-level="6.7" data-path="the-dvdrental-database-in-postgres-in-docker-05.html"><a href="the-dvdrental-database-in-postgres-in-docker-05.html#stop-and-start-to-demonstrate-persistence"><i class="fa fa-check"></i><b>6.7</b> Stop and start to demonstrate persistence</a></li>
<li class="chapter" data-level="6.8" data-path="the-dvdrental-database-in-postgres-in-docker-05.html"><a href="the-dvdrental-database-in-postgres-in-docker-05.html#cleaning-up"><i class="fa fa-check"></i><b>6.8</b> Cleaning up</a></li>
<li class="chapter" data-level="6.9" data-path="the-dvdrental-database-in-postgres-in-docker-05.html"><a href="the-dvdrental-database-in-postgres-in-docker-05.html#using-the-sql-pet-container-in-the-rest-of-the-book"><i class="fa fa-check"></i><b>6.9</b> Using the <code>sql-pet</code> container in the rest of the book</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html"><i class="fa fa-check"></i><b>7</b> Mapping your local environment (10)</a><ul>
<li class="chapter" data-level="7.1" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#tutorial-environment"><i class="fa fa-check"></i><b>7.1</b> Tutorial Environment</a></li>
<li class="chapter" data-level="7.2" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#communicating-with-docker-applications"><i class="fa fa-check"></i><b>7.2</b> Communicating with Docker Applications</a></li>
<li class="chapter" data-level="7.3" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#exercises"><i class="fa fa-check"></i><b>7.3</b> Exercises</a><ul>
<li class="chapter" data-level="7.3.1" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#docker-help"><i class="fa fa-check"></i><b>7.3.1</b> Docker Help</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="explain-queries-11.html"><a href="explain-queries-11.html"><i class="fa fa-check"></i><b>8</b> Explain queries (11)</a></li>
<li class="chapter" data-level="9" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html"><i class="fa fa-check"></i><b>9</b> Introduction to DBMS queries (11)</a><ul>
<li class="chapter" data-level="9.1" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#downloading-the-data-from-the-database"><i class="fa fa-check"></i><b>9.1</b> Downloading the data from the database</a><ul>
<li class="chapter" data-level="9.1.1" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#finding-out-whats-there"><i class="fa fa-check"></i><b>9.1.1</b> Finding out what’s there</a></li>
<li class="chapter" data-level="9.1.2" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#downloading-an-entire-table"><i class="fa fa-check"></i><b>9.1.2</b> Downloading an entire table</a></li>
<li class="chapter" data-level="9.1.3" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#referencing-a-table-for-many-different-purposes"><i class="fa fa-check"></i><b>9.1.3</b> Referencing a table for many different purposes</a></li>
<li class="chapter" data-level="9.1.4" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#sub-setting-variables"><i class="fa fa-check"></i><b>9.1.4</b> Sub-setting variables</a></li>
<li class="chapter" data-level="9.1.5" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#controlling-number-of-rows-returned"><i class="fa fa-check"></i><b>9.1.5</b> Controlling number of rows returned</a></li>
<li class="chapter" data-level="9.1.6" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#random-rows-from-the-dbms"><i class="fa fa-check"></i><b>9.1.6</b> Random rows from the dbms</a></li>
<li class="chapter" data-level="9.1.7" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#examining-dplyrs-sql-query-and-re-using-sql-code"><i class="fa fa-check"></i><b>9.1.7</b> Examining <code>dplyr</code>’s SQL query and re-using SQL code</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#investigating-a-single-table-with-r"><i class="fa fa-check"></i><b>9.2</b> Investigating a single table with R</a><ul>
<li class="chapter" data-level="9.2.1" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#str---a-base-package-workhorse"><i class="fa fa-check"></i><b>9.2.1</b> <code>str</code> - a base package workhorse</a></li>
<li class="chapter" data-level="9.2.2" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#always-just-look-at-your-data-with-head-view-or-kable"><i class="fa fa-check"></i><b>9.2.2</b> Always just <strong>look</strong> at your data with <code>head</code>, <code>View</code>, or <code>kable</code></a></li>
<li class="chapter" data-level="9.2.3" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#the-summary-function-in-base"><i class="fa fa-check"></i><b>9.2.3</b> The <code>summary</code> function in base</a></li>
<li class="chapter" data-level="9.2.4" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#the-glimpse-function-in-the-tibble-package"><i class="fa fa-check"></i><b>9.2.4</b> The <code>glimpse</code> function in the <code>tibble</code> package</a></li>
<li class="chapter" data-level="9.2.5" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#the-skim-function-in-the-skmir-package"><i class="fa fa-check"></i><b>9.2.5</b> The <code>skim</code> function in the <code>skmir</code> package</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#dividing-the-work-between-r-on-your-machine-and-the-dbms"><i class="fa fa-check"></i><b>9.3</b> Dividing the work between R on your machine and the DBMS</a><ul>
<li class="chapter" data-level="9.3.1" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#make-the-server-do-as-much-work-as-you-can"><i class="fa fa-check"></i><b>9.3.1</b> Make the server do as much work as you can</a></li>
<li class="chapter" data-level="9.3.2" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#criteria-for-choosing-between-dplyr-and-native-sql"><i class="fa fa-check"></i><b>9.3.2</b> Criteria for choosing between <code>dplyr</code> and native SQL</a></li>
<li class="chapter" data-level="9.3.3" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#dplyr-tools"><i class="fa fa-check"></i><b>9.3.3</b> <code>dplyr</code> tools</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="introduction-to-dbms-queries-11.html"><a href="introduction-to-dbms-queries-11.html#other-resources"><i class="fa fa-check"></i><b>9.4</b> Other resources</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html"><i class="fa fa-check"></i><b>10</b> Joins and complex queries (13)</a><ul>
<li class="chapter" data-level="10.1" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#joins"><i class="fa fa-check"></i><b>10.1</b> Joins</a><ul>
<li class="chapter" data-level="10.1.1" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#union"><i class="fa fa-check"></i><b>10.1.1</b> Union</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#store-analysis"><i class="fa fa-check"></i><b>10.2</b> Store analysis</a><ul>
<li class="chapter" data-level="10.2.1" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#which-store-has-had-more-rentals-and-income"><i class="fa fa-check"></i><b>10.2.1</b> which store has had more rentals and income</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#store-analysis-1"><i class="fa fa-check"></i><b>10.3</b> Store analysis</a><ul>
<li class="chapter" data-level="10.3.1" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#which-store-has-the-largest-income-stream"><i class="fa fa-check"></i><b>10.3.1</b> which store has the largest income stream?</a></li>
<li class="chapter" data-level="10.3.2" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#how-many-rentals-have-not-been-paid"><i class="fa fa-check"></i><b>10.3.2</b> How many rentals have not been paid</a></li>
<li class="chapter" data-level="10.3.3" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#how-many-rentals-have-been-paid"><i class="fa fa-check"></i><b>10.3.3</b> How many rentals have been paid</a></li>
<li class="chapter" data-level="10.3.4" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#how-much-has-been-paid"><i class="fa fa-check"></i><b>10.3.4</b> How much has been paid</a></li>
<li class="chapter" data-level="10.3.5" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#what-is-the-average-pricemovie"><i class="fa fa-check"></i><b>10.3.5</b> What is the average price/movie</a></li>
<li class="chapter" data-level="10.3.6" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#estimate-the-outstanding-balance"><i class="fa fa-check"></i><b>10.3.6</b> Estimate the outstanding balance</a></li>
<li class="chapter" data-level="10.3.7" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#what-is-the-actual-outstanding-balance"><i class="fa fa-check"></i><b>10.3.7</b> what is the actual outstanding balance</a></li>
<li class="chapter" data-level="10.3.8" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#rank-customers-with-highest-open-amounts"><i class="fa fa-check"></i><b>10.3.8</b> Rank customers with highest open amounts</a></li>
<li class="chapter" data-level="10.3.9" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#what-film-has-been-generated-the-most-revenue-assuming-all-amounts-are-collected"><i class="fa fa-check"></i><b>10.3.9</b> what film has been generated the most revenue assuming all amounts are collected</a></li>
<li class="chapter" data-level="10.3.10" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#which-films-are-in-one-store-but-not-the-other."><i class="fa fa-check"></i><b>10.3.10</b> which films are in one store but not the other.</a></li>
<li class="chapter" data-level="10.3.11" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#compute-the-outstanding-balance."><i class="fa fa-check"></i><b>10.3.11</b> Compute the outstanding balance.</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#different-strategies-for-interacting-with-the-database"><i class="fa fa-check"></i><b>10.4</b> Different strategies for interacting with the database</a><ul>
<li class="chapter" data-level="10.4.1" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#use-dbgetquery"><i class="fa fa-check"></i><b>10.4.1</b> Use dbGetQuery</a></li>
<li class="chapter" data-level="10.4.2" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#use-dbexecute"><i class="fa fa-check"></i><b>10.4.2</b> Use dbExecute</a></li>
<li class="chapter" data-level="10.4.3" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#anti-join-find-sophie-who-have-never-rented-a-movie."><i class="fa fa-check"></i><b>10.4.3</b> anti join – Find sophie who have never rented a movie.</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#sql-commands"><i class="fa fa-check"></i><b>10.5</b> SQL Commands</a></li>
<li class="chapter" data-level="10.6" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#section"><i class="fa fa-check"></i><b>10.6</b> </a><ul>
<li class="chapter" data-level="10.6.1" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#select-clause-column-selection-vertical-partioning-of-data"><i class="fa fa-check"></i><b>10.6.1</b> SELECT Clause: Column Selection – Vertical Partioning of Data</a></li>
<li class="chapter" data-level="10.6.2" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#sql-comments"><i class="fa fa-check"></i><b>10.6.2</b> SQL Comments</a></li>
<li class="chapter" data-level="10.6.3" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#from-clause"><i class="fa fa-check"></i><b>10.6.3</b> FROM Clause</a></li>
<li class="chapter" data-level="10.6.4" data-path="joins-and-complex-queries-13.html"><a href="joins-and-complex-queries-13.html#where-clause-row-selection-horizontal-partitioning-of-data"><i class="fa fa-check"></i><b>10.6.4</b> WHERE Clause: Row Selection – Horizontal Partitioning of Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html"><i class="fa fa-check"></i><b>11</b> SQL Quick start - simple retrieval (15)</a><ul>
<li class="chapter" data-level="11.1" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#sql-commands-1"><i class="fa fa-check"></i><b>11.1</b> SQL Commands</a></li>
<li class="chapter" data-level="11.2" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#query-statement-structure"><i class="fa fa-check"></i><b>11.2</b> Query statement structure</a></li>
<li class="chapter" data-level="11.3" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#sql-clauses"><i class="fa fa-check"></i><b>11.3</b> SQL Clauses</a></li>
<li class="chapter" data-level="11.4" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#select-clause-column-selection-vertical-partioning-of-data-1"><i class="fa fa-check"></i><b>11.4</b> SELECT Clause: Column Selection – Vertical Partioning of Data</a><ul>
<li class="chapter" data-level="11.4.1" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#simplest-sql-query-all-rows-and-all-columns-from-a-single-table.-1"><i class="fa fa-check"></i><b>11.4.1</b> 1. Simplest SQL query: All rows and all columns from a single table.</a></li>
<li class="chapter" data-level="11.4.2" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#same-query-as-1-but-only-show-first-two-columns-1"><i class="fa fa-check"></i><b>11.4.2</b> 2. Same Query as 1, but only show first two columns;</a></li>
<li class="chapter" data-level="11.4.3" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#same-query-as-2-but-reverse-the-column-order-1"><i class="fa fa-check"></i><b>11.4.3</b> 3. Same Query as 2, but reverse the column order</a></li>
<li class="chapter" data-level="11.4.4" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#rename-columns-sql-column-alias-in-the-result-set-1"><i class="fa fa-check"></i><b>11.4.4</b> 4. Rename Columns – SQL column alias in the result set</a></li>
<li class="chapter" data-level="11.4.5" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#adding-labels-and-additional-columns-to-the-result-set-1"><i class="fa fa-check"></i><b>11.4.5</b> 5. Adding labels and Additional Columns to the Result Set</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#sql-comments-1"><i class="fa fa-check"></i><b>11.5</b> SQL Comments</a><ul>
<li class="chapter" data-level="11.5.1" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#single-line-comment-1"><i class="fa fa-check"></i><b>11.5.1</b> 6. Single line comment –</a></li>
<li class="chapter" data-level="11.5.2" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#multi-line-comment-1"><i class="fa fa-check"></i><b>11.5.2</b> 7. Multi-line comment /*…*/</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#from-clause-1"><i class="fa fa-check"></i><b>11.6</b> FROM Clause</a><ul>
<li class="chapter" data-level="11.6.1" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#table-uses-1"><i class="fa fa-check"></i><b>11.6.1</b> Table Uses</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#where-clause-row-selection-horizontal-partitioning-of-data-1"><i class="fa fa-check"></i><b>11.7</b> WHERE Clause: Row Selection – Horizontal Partitioning of Data</a><ul>
<li class="chapter" data-level="11.7.1" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#example-continued-1"><i class="fa fa-check"></i><b>11.7.1</b> Example Continued</a></li>
<li class="chapter" data-level="11.7.2" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#where-condition-logically-never-true.-1"><i class="fa fa-check"></i><b>11.7.2</b> 7 WHERE condition logically never TRUE.</a></li>
<li class="chapter" data-level="11.7.3" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#where-condition-logically-always-true.-1"><i class="fa fa-check"></i><b>11.7.3</b> 8 WHERE condition logically always TRUE.</a></li>
<li class="chapter" data-level="11.7.4" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#where-equality-condition-1"><i class="fa fa-check"></i><b>11.7.4</b> 9 WHERE equality condition</a></li>
<li class="chapter" data-level="11.7.5" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#where-not-equal-conditions-1"><i class="fa fa-check"></i><b>11.7.5</b> 10 WHERE NOT equal conditions</a></li>
<li class="chapter" data-level="11.7.6" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#where-or-condition-1"><i class="fa fa-check"></i><b>11.7.6</b> 10 WHERE OR condition</a></li>
</ul></li>
<li class="chapter" data-level="11.8" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#to-dos"><i class="fa fa-check"></i><b>11.8</b> TO-DO’s</a><ul>
<li class="chapter" data-level="11.8.1" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#which-database"><i class="fa fa-check"></i><b>11.8.1</b> Which database?</a></li>
<li class="chapter" data-level="11.8.2" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#how-many-databases-reside-in-the-docker-container"><i class="fa fa-check"></i><b>11.8.2</b> How many databases reside in the Docker Container?</a></li>
<li class="chapter" data-level="11.8.3" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#which-schema"><i class="fa fa-check"></i><b>11.8.3</b> Which Schema?</a></li>
<li class="chapter" data-level="11.8.4" data-path="sql-quick-start-simple-retrieval-15.html"><a href="sql-quick-start-simple-retrieval-15.html#exercises-1"><i class="fa fa-check"></i><b>11.8.4</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html"><i class="fa fa-check"></i><b>12</b> Getting metadata about and from the database (21)</a><ul>
<li class="chapter" data-level="12.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#always-look-at-the-data"><i class="fa fa-check"></i><b>12.1</b> Always <em>look</em> at the data</a><ul>
<li class="chapter" data-level="12.1.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#connect-with-people-who-own-generate-or-are-the-subjects-of-the-data"><i class="fa fa-check"></i><b>12.1.1</b> Connect with people who own, generate, or are the subjects of the data</a></li>
<li class="chapter" data-level="12.1.2" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#browse-a-few-rows-of-a-table"><i class="fa fa-check"></i><b>12.1.2</b> Browse a few rows of a table</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#database-contents-and-structure"><i class="fa fa-check"></i><b>12.2</b> Database contents and structure</a><ul>
<li class="chapter" data-level="12.2.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#database-structure"><i class="fa fa-check"></i><b>12.2.1</b> Database structure</a></li>
<li class="chapter" data-level="12.2.2" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#contents-of-the-information_schema"><i class="fa fa-check"></i><b>12.2.2</b> Contents of the <code>information_schema</code></a></li>
<li class="chapter" data-level="12.2.3" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#what-tables-are-in-the-database"><i class="fa fa-check"></i><b>12.2.3</b> What tables are in the database?</a></li>
<li class="chapter" data-level="12.2.4" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#digging-into-the-information_schema"><i class="fa fa-check"></i><b>12.2.4</b> Digging into the <code>information_schema</code></a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#what-columns-do-those-tables-contain"><i class="fa fa-check"></i><b>12.3</b> What columns do those tables contain?</a><ul>
<li class="chapter" data-level="12.3.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#what-is-the-difference-between-a-view-and-a-base-table"><i class="fa fa-check"></i><b>12.3.1</b> What is the difference between a <code>VIEW</code> and a <code>BASE TABLE</code>?</a></li>
<li class="chapter" data-level="12.3.2" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#what-data-types-are-found-in-the-database"><i class="fa fa-check"></i><b>12.3.2</b> What data types are found in the database?</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#characterizing-how-things-are-named"><i class="fa fa-check"></i><b>12.4</b> Characterizing how things are named</a><ul>
<li class="chapter" data-level="12.4.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#counting-columns-and-name-reuse"><i class="fa fa-check"></i><b>12.4.1</b> Counting columns and name reuse</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#database-keys"><i class="fa fa-check"></i><b>12.5</b> Database keys</a><ul>
<li class="chapter" data-level="12.5.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#direct-sql"><i class="fa fa-check"></i><b>12.5.1</b> Direct SQL</a></li>
<li class="chapter" data-level="12.5.2" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#database-keys-with-dplyr"><i class="fa fa-check"></i><b>12.5.2</b> Database keys with dplyr</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#creating-your-own-data-dictionary"><i class="fa fa-check"></i><b>12.6</b> Creating your own data dictionary</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="drilling-into-your-db-environment-22.html"><a href="drilling-into-your-db-environment-22.html"><i class="fa fa-check"></i><b>13</b> Drilling into Your DB Environment (22)</a><ul>
<li class="chapter" data-level="13.1" data-path="drilling-into-your-db-environment-22.html"><a href="drilling-into-your-db-environment-22.html#which-database-1"><i class="fa fa-check"></i><b>13.1</b> Which database?</a></li>
<li class="chapter" data-level="13.2" data-path="drilling-into-your-db-environment-22.html"><a href="drilling-into-your-db-environment-22.html#how-many-databases-reside-in-the-docker-container-1"><i class="fa fa-check"></i><b>13.2</b> How many databases reside in the Docker Container?</a></li>
<li class="chapter" data-level="13.3" data-path="drilling-into-your-db-environment-22.html"><a href="drilling-into-your-db-environment-22.html#which-schema-1"><i class="fa fa-check"></i><b>13.3</b> Which Schema?</a></li>
<li class="chapter" data-level="13.4" data-path="drilling-into-your-db-environment-22.html"><a href="drilling-into-your-db-environment-22.html#exercises-2"><i class="fa fa-check"></i><b>13.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="explain-queries-71.html"><a href="explain-queries-71.html"><i class="fa fa-check"></i><b>14</b> Explain queries (71)</a><ul>
<li class="chapter" data-level="14.1" data-path="explain-queries-71.html"><a href="explain-queries-71.html#performance-considerations"><i class="fa fa-check"></i><b>14.1</b> Performance considerations</a></li>
<li class="chapter" data-level="14.2" data-path="explain-queries-71.html"><a href="explain-queries-71.html#clean-up-1"><i class="fa fa-check"></i><b>14.2</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="sql-queries-behind-the-scenes-72.html"><a href="sql-queries-behind-the-scenes-72.html"><i class="fa fa-check"></i><b>15</b> SQL queries behind the scenes (72)</a><ul>
<li class="chapter" data-level="15.1" data-path="sql-queries-behind-the-scenes-72.html"><a href="sql-queries-behind-the-scenes-72.html#sql-execution-steps"><i class="fa fa-check"></i><b>15.1</b> SQL Execution Steps</a></li>
<li class="chapter" data-level="15.2" data-path="sql-queries-behind-the-scenes-72.html"><a href="sql-queries-behind-the-scenes-72.html#passing-values-to-sql-statements"><i class="fa fa-check"></i><b>15.2</b> Passing values to SQL statements</a></li>
<li class="chapter" data-level="15.3" data-path="sql-queries-behind-the-scenes-72.html"><a href="sql-queries-behind-the-scenes-72.html#pass-multiple-sets-of-values-with-dbbind"><i class="fa fa-check"></i><b>15.3</b> Pass multiple sets of values with dbBind():</a></li>
<li class="chapter" data-level="15.4" data-path="sql-queries-behind-the-scenes-72.html"><a href="sql-queries-behind-the-scenes-72.html#clean-up-2"><i class="fa fa-check"></i><b>15.4</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="writing-to-the-dbms-73.html"><a href="writing-to-the-dbms-73.html"><i class="fa fa-check"></i><b>16</b> Writing to the DBMS (73)</a><ul>
<li class="chapter" data-level="16.1" data-path="writing-to-the-dbms-73.html"><a href="writing-to-the-dbms-73.html#create-a-new-table"><i class="fa fa-check"></i><b>16.1</b> Create a new table</a></li>
<li class="chapter" data-level="16.2" data-path="writing-to-the-dbms-73.html"><a href="writing-to-the-dbms-73.html#modify-an-existing-table"><i class="fa fa-check"></i><b>16.2</b> Modify an existing table</a></li>
<li class="chapter" data-level="16.3" data-path="writing-to-the-dbms-73.html"><a href="writing-to-the-dbms-73.html#remove-table-and-clean-up"><i class="fa fa-check"></i><b>16.3</b> Remove table and Clean up</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="appendix-appendix-a-other-resources-89.html"><a href="appendix-appendix-a-other-resources-89.html"><i class="fa fa-check"></i><b>17</b> (APPENDIX) Appendix A: Other resources (89)</a><ul>
<li class="chapter" data-level="17.1" data-path="appendix-appendix-a-other-resources-89.html"><a href="appendix-appendix-a-other-resources-89.html#editing-this-book"><i class="fa fa-check"></i><b>17.1</b> Editing this book</a></li>
<li class="chapter" data-level="17.2" data-path="appendix-appendix-a-other-resources-89.html"><a href="appendix-appendix-a-other-resources-89.html#docker-alternatives"><i class="fa fa-check"></i><b>17.2</b> Docker alternatives</a></li>
<li class="chapter" data-level="17.3" data-path="appendix-appendix-a-other-resources-89.html"><a href="appendix-appendix-a-other-resources-89.html#docker-and-r"><i class="fa fa-check"></i><b>17.3</b> Docker and R</a></li>
<li class="chapter" data-level="17.4" data-path="appendix-appendix-a-other-resources-89.html"><a href="appendix-appendix-a-other-resources-89.html#documentation-for-docker-and-postgres"><i class="fa fa-check"></i><b>17.4</b> Documentation for Docker and Postgres</a></li>
<li class="chapter" data-level="17.5" data-path="appendix-appendix-a-other-resources-89.html"><a href="appendix-appendix-a-other-resources-89.html#sql-and-dplyr"><i class="fa fa-check"></i><b>17.5</b> SQL and dplyr</a></li>
<li class="chapter" data-level="17.6" data-path="appendix-appendix-a-other-resources-89.html"><a href="appendix-appendix-a-other-resources-89.html#more-resources"><i class="fa fa-check"></i><b>17.6</b> More Resources</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="appendix-b-mapping-your-local-environment-92.html"><a href="appendix-b-mapping-your-local-environment-92.html"><i class="fa fa-check"></i><b>18</b> APPENDIX B - Mapping your local environment (92)</a><ul>
<li class="chapter" data-level="18.1" data-path="appendix-b-mapping-your-local-environment-92.html"><a href="appendix-b-mapping-your-local-environment-92.html#environment-tools-used-in-this-chapter"><i class="fa fa-check"></i><b>18.1</b> Environment Tools Used in this Chapter</a></li>
<li class="chapter" data-level="18.2" data-path="appendix-b-mapping-your-local-environment-92.html"><a href="appendix-b-mapping-your-local-environment-92.html#communicating-with-docker-applications-1"><i class="fa fa-check"></i><b>18.2</b> Communicating with Docker Applications</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="appendix-c-creating-the-sql-pet-docker-container-a-step-at-a-time.html"><a href="appendix-c-creating-the-sql-pet-docker-container-a-step-at-a-time.html"><i class="fa fa-check"></i><b>19</b> APPENDIX C - Creating the sql-pet Docker container a step at a time</a><ul>
<li class="chapter" data-level="19.1" data-path="appendix-c-creating-the-sql-pet-docker-container-a-step-at-a-time.html"><a href="appendix-c-creating-the-sql-pet-docker-container-a-step-at-a-time.html#overview-1"><i class="fa fa-check"></i><b>19.1</b> Overview</a></li>
<li class="chapter" data-level="19.2" data-path="appendix-c-creating-the-sql-pet-docker-container-a-step-at-a-time.html"><a href="appendix-c-creating-the-sql-pet-docker-container-a-step-at-a-time.html#download-the-dvdrental-backup-file"><i class="fa fa-check"></i><b>19.2</b> Download the <code>dvdrental</code> backup file</a></li>
<li class="chapter" data-level="19.3" data-path="appendix-c-creating-the-sql-pet-docker-container-a-step-at-a-time.html"><a href="appendix-c-creating-the-sql-pet-docker-container-a-step-at-a-time.html#build-the-docker-container"><i class="fa fa-check"></i><b>19.3</b> Build the Docker Container</a></li>
<li class="chapter" data-level="19.4" data-path="appendix-c-creating-the-sql-pet-docker-container-a-step-at-a-time.html"><a href="appendix-c-creating-the-sql-pet-docker-container-a-step-at-a-time.html#create-the-database-and-restore-from-the-backup"><i class="fa fa-check"></i><b>19.4</b> Create the database and restore from the backup</a></li>
<li class="chapter" data-level="19.5" data-path="appendix-c-creating-the-sql-pet-docker-container-a-step-at-a-time.html"><a href="appendix-c-creating-the-sql-pet-docker-container-a-step-at-a-time.html#connect-to-the-database-with-r"><i class="fa fa-check"></i><b>19.5</b> Connect to the database with R</a></li>
<li class="chapter" data-level="19.6" data-path="appendix-c-creating-the-sql-pet-docker-container-a-step-at-a-time.html"><a href="appendix-c-creating-the-sql-pet-docker-container-a-step-at-a-time.html#cleaning-up-1"><i class="fa fa-check"></i><b>19.6</b> Cleaning up</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="appendix-d-quick-guide-to-sql-94.html"><a href="appendix-d-quick-guide-to-sql-94.html"><i class="fa fa-check"></i><b>20</b> APPENDIX D - Quick Guide to SQL (94)</a><ul>
<li class="chapter" data-level="20.1" data-path="appendix-d-quick-guide-to-sql-94.html"><a href="appendix-d-quick-guide-to-sql-94.html#small-architecture"><i class="fa fa-check"></i><b>20.1</b> Small architecture</a></li>
<li class="chapter" data-level="20.2" data-path="appendix-d-quick-guide-to-sql-94.html"><a href="appendix-d-quick-guide-to-sql-94.html#medium-architecture"><i class="fa fa-check"></i><b>20.2</b> Medium architecture</a></li>
<li class="chapter" data-level="20.3" data-path="appendix-d-quick-guide-to-sql-94.html"><a href="appendix-d-quick-guide-to-sql-94.html#large-architecture-95"><i class="fa fa-check"></i><b>20.3</b> Large architecture (95)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R, Databases and Docker</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sql-quick-start---simple-retrieval-15" class="section level1">
<h1><span class="header-section-number">Chapter 11</span> SQL Quick start - simple retrieval (15)</h1>
<p>Start up the <code>docker-pet</code> container</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" data-line-number="1"><span class="kw">sp_docker_start</span>(<span class="st">&quot;sql-pet&quot;</span>)</a></code></pre></div>
<p>Now connect to the <code>dvdrental</code> database with R</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb171-1" data-line-number="1">con &lt;-<span class="st"> </span><span class="kw">sp_get_postgres_connection</span>(</a>
<a class="sourceLine" id="cb171-2" data-line-number="2">  <span class="dt">user =</span> <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_USER_NAME&quot;</span>),</a>
<a class="sourceLine" id="cb171-3" data-line-number="3">  <span class="dt">password =</span>  <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_PASSWORD&quot;</span>),</a>
<a class="sourceLine" id="cb171-4" data-line-number="4">  <span class="dt">dbname =</span> <span class="st">&quot;dvdrental&quot;</span>,</a>
<a class="sourceLine" id="cb171-5" data-line-number="5">  <span class="dt">seconds_to_test =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb171-6" data-line-number="6">con</a></code></pre></div>
<pre><code>## &lt;PqConnection&gt; dvdrental@localhost:5432</code></pre>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb173-1" data-line-number="1">colFmt &lt;-<span class="st"> </span><span class="cf">function</span>(x,color)</a>
<a class="sourceLine" id="cb173-2" data-line-number="2">{</a>
<a class="sourceLine" id="cb173-3" data-line-number="3">  <span class="co"># x string</span></a>
<a class="sourceLine" id="cb173-4" data-line-number="4">  <span class="co"># color </span></a>
<a class="sourceLine" id="cb173-5" data-line-number="5">  outputFormat =<span class="st"> </span>knitr<span class="op">::</span>opts_knit<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;rmarkdown.pandoc.to&quot;</span>)</a>
<a class="sourceLine" id="cb173-6" data-line-number="6">  <span class="cf">if</span>(outputFormat <span class="op">==</span><span class="st"> &#39;latex&#39;</span>)</a>
<a class="sourceLine" id="cb173-7" data-line-number="7">    <span class="kw">paste</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">textcolor{&quot;</span>,color,<span class="st">&quot;}{&quot;</span>,x,<span class="st">&quot;}&quot;</span>,<span class="dt">sep=</span><span class="st">&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb173-8" data-line-number="8">  <span class="cf">else</span> <span class="cf">if</span>(outputFormat <span class="op">==</span><span class="st"> &#39;html&#39;</span>)</a>
<a class="sourceLine" id="cb173-9" data-line-number="9">    <span class="kw">paste</span>(<span class="st">&quot;&lt;font color=&#39;&quot;</span>,color,<span class="st">&quot;&#39;&gt;&quot;</span>,x,<span class="st">&quot;&lt;/font&gt;&quot;</span>,<span class="dt">sep=</span><span class="st">&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb173-10" data-line-number="10">  <span class="cf">else</span></a>
<a class="sourceLine" id="cb173-11" data-line-number="11">    x</a>
<a class="sourceLine" id="cb173-12" data-line-number="12">}</a>
<a class="sourceLine" id="cb173-13" data-line-number="13"></a>
<a class="sourceLine" id="cb173-14" data-line-number="14"><span class="co"># sample call</span></a>
<a class="sourceLine" id="cb173-15" data-line-number="15"><span class="co"># * `r colFmt(&#39;Cover inline tables in future section&#39;,&#39;red&#39;)`</span></a></code></pre></div>
<p>Moved this from 11-elementary-queries</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb174-1" data-line-number="1">dplyr_summary_df &lt;-</a>
<a class="sourceLine" id="cb174-2" data-line-number="2"><span class="st">    </span><span class="kw">read.delim</span>(</a>
<a class="sourceLine" id="cb174-3" data-line-number="3">    <span class="st">&#39;11-dplyr_sql_summary_table.tsv&#39;</span>,</a>
<a class="sourceLine" id="cb174-4" data-line-number="4">    <span class="dt">header =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb174-5" data-line-number="5">    <span class="dt">sep =</span> <span class="st">&#39;</span><span class="ch">\t</span><span class="st">&#39;</span>,</a>
<a class="sourceLine" id="cb174-6" data-line-number="6">    <span class="dt">as.is =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb174-7" data-line-number="7">    )</a>
<a class="sourceLine" id="cb174-8" data-line-number="8"></a>
<a class="sourceLine" id="cb174-9" data-line-number="9"><span class="kw">head</span>(dplyr_summary_df)</a></code></pre></div>
<pre><code>##   In          Dplyr_Function
## 1  Y               arrange()
## 2 Y?              distinct()
## 3  Y       select() rename()
## 4  N                  pull()
## 5  Y    mutate() transmute()
## 6  Y summarise() summarize()
##                                      description
## 1                      Arrange rows by variables
## 2           Return rows with matching conditions
## 3                Select/rename variables by name
## 4                     Pull out a single variable
## 5                              Add new variables
## 6 Reduces multiple values down to a single value
##                            SQL_Clause Notes                 Category
## 1                            ORDER BY    NA Basic single-table verbs
## 2                   SELECT distinct *    NA Basic single-table verbs
## 3       SELECT column_name alias_name    NA Basic single-table verbs
## 4                 SELECT column_name;    NA Basic single-table verbs
## 5 SELECT computed_value computed_name    NA Basic single-table verbs
## 6 SELECT aggregate_functions GROUP BY    NA Basic single-table verbs</code></pre>
<div id="sql-commands-1" class="section level2">
<h2><span class="header-section-number">11.1</span> SQL Commands</h2>
<p>SQL commands fall into four categories.</p>
<table>
<colgroup>
<col width="20%" />
<col width="79%" />
</colgroup>
<thead>
<tr class="header">
<th>SQL Category</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>DDL:Data Definition Language</td>
<td>DBA’s execute these commands to define objects in the database.</td>
</tr>
<tr class="even">
<td>DML:Data Manipulation Language</td>
<td>Users and developers execute these commands to investigate data.</td>
</tr>
<tr class="odd">
<td>DCL:Data Control Language</td>
<td>DBA’s execute these commands to grant/revoke access to</td>
</tr>
<tr class="even">
<td>TCL:Transaction Control Language</td>
<td>Developers execute these commands when developing applications.</td>
</tr>
</tbody>
</table>
<p>Data analysts use the SELECT DML command to learn interesting things about the data stored in the database. Applications are used to control the insert, update, and deletion of data in the database. Data users can update the database objects via the application which enforces referential integrity in the database, but not directly against the application database objects.</p>
<p>DBA’s can setup a sandbox within the database for a data analyst. The application(s) do not maintain the data in the sandbox. In addition to the SELECT command, data analysts may be granted any or all the commands in the DDL and DML sections in the table below. The most common ones are the DML commands with a star, &quot;*. &quot;</p>
<table>
<thead>
<tr class="header">
<th>DDL</th>
<th>DML</th>
<th>DCL</th>
<th>TCL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ALTER</td>
<td>CALL</td>
<td>GRANT</td>
<td>COMMIT</td>
</tr>
<tr class="even">
<td>CREATE</td>
<td>DELETE*</td>
<td>REVOKE</td>
<td>ROLLBACK</td>
</tr>
<tr class="odd">
<td>DROP</td>
<td>EXPLAIN PLAN</td>
<td></td>
<td>SAVEPOINT</td>
</tr>
<tr class="even">
<td>RENAME</td>
<td>INSERT*</td>
<td></td>
<td>SET TRANSACTION</td>
</tr>
<tr class="odd">
<td>TRUNCATE</td>
<td>LOCK TABLE</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>MERGE</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>SELECT*</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>UPDATE*</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Most relational database applications are designed for speed, speedy on-line transactional processing, OLTP, and a lot of parent child relationships. Such applications can have 100’s or even 1000’s of tables supporting the application. The goal is to transform the application data model into a useful data analysis model using the DDL and DML SQL statements.</p>
<p>The <code>sql-pet</code> database is tiny, but for the purposes of these exercises, we assume that data so large that it will not easily fit into the memory of your laptop.</p>
<p>A SQL SELECT statement consists of 1 to 6 clauses. In the table below, <code>object</code> refers to either a database table or a view object.</p>
<table>
<colgroup>
<col width="26%" />
<col width="26%" />
<col width="46%" />
</colgroup>
<thead>
<tr class="header">
<th>SQL Clause</th>
<th>DPLYR Verb</th>
<th>SQL Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SELECT</td>
<td>SELECT()</td>
<td>Contains a list of column names from an object or a derived value.</td>
</tr>
<tr class="even">
<td></td>
<td>mutate()</td>
<td></td>
</tr>
<tr class="odd">
<td>FROM</td>
<td></td>
<td>Contains a list of related objects from which the SELECT list of columns is derived.</td>
</tr>
<tr class="even">
<td>WHERE</td>
<td>filter()</td>
<td>Provides the filter conditions the objects in the FROM clause must meet.</td>
</tr>
<tr class="odd">
<td>GROUP BY</td>
<td>group_by()</td>
<td>Contains a list unique column values returned from the WHERE clause.</td>
</tr>
<tr class="even">
<td>HAVING</td>
<td></td>
<td>Provides the filter condition on the the GROUP BY clause.</td>
</tr>
<tr class="odd">
<td>ORDER BY</td>
<td>arrange()</td>
<td>Contains a list of column names indicating the order of the column value. Each column can be either ASCending or DEScending.</td>
</tr>
</tbody>
</table>
</div>
<div id="query-statement-structure" class="section level2">
<h2><span class="header-section-number">11.2</span> Query statement structure</h2>
<p>A SQL query statement consists of six distinct parts and each part is referred to as a clause. The foundation of the SQL language is based set theory and the result of a SQL query is referred to as a result set. A SQL query statement is “guaranteed” to return the same set of data,
but not necessarily in the same order. However, in practice, the result set is usually in the same order.</p>
<p>For this tutorial, a SQL query either returns a detailed row set or a summarized row set. The detailed row set can show, but is not required to
show every column. A summarized row set requires one or more summary columns and the associated aggregated summary values.</p>
<p>Sales reps may be interested a detailed sales report showing all their activity. At the end of the month, the sales rep may be interested at a
summary level based on product line dollars. The sales manager may be more interest in territory dollars.</p>
</div>
<div id="sql-clauses" class="section level2">
<h2><span class="header-section-number">11.3</span> SQL Clauses</h2>
<ol style="list-style-type: decimal">
<li>Select Clause</li>
<li>From Clause</li>
<li>Where Clause</li>
<li>Group By Clause</li>
<li>Having Clause</li>
<li>Order By Clause</li>
</ol>
<p>This section focuses on getting new SQL users familiar with the six SQL query clauses and a single table. SQL queries from multiple tables are discussed
in the JOIN section of this tutorial.</p>
<p>For lack of a better term, a SQL-QBE, a very simple SQL Query by example, is used to illustrate some SQL feature.</p>
<pre><code>Side Note: This version of Postgres requires all SQL statments be terminated with a semi-colon.  </code></pre>
<p>Some older flavors of SQL and GUI tools do not require the SQL statement to be terminated with a semi-colon, ‘;’ for the command to be executed. It is recommended that you always terminate your SQL commands with a semi-colon.</p>
</div>
<div id="select-clause-column-selection-vertical-partioning-of-data-1" class="section level2">
<h2><span class="header-section-number">11.4</span> SELECT Clause: Column Selection – Vertical Partioning of Data</h2>
<div id="simplest-sql-query-all-rows-and-all-columns-from-a-single-table.-1" class="section level3">
<h3><span class="header-section-number">11.4.1</span> 1. Simplest SQL query: All rows and all columns from a single table.</h3>
<pre><code>dvdrental=# select * from store;  </code></pre>
<table>
<thead>
<tr class="header">
<th>store_id</th>
<th>manager_staff_id</th>
<th>address_id</th>
<th>last_update</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>1</td>
<td>2006-02-15 09:57:12</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
<td>2</td>
<td>2006-02-15 09:57:12</td>
</tr>
</tbody>
</table>
</div>
<div id="same-query-as-1-but-only-show-first-two-columns-1" class="section level3">
<h3><span class="header-section-number">11.4.2</span> 2. Same Query as 1, but only show first two columns;</h3>
<pre><code>dvdrental=# select STORE_ID, manager_staff_id from store;                </code></pre>
<table>
<thead>
<tr class="header">
<th>store_id</th>
<th>manager_staff_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
</tr>
</tbody>
</table>
</div>
<div id="same-query-as-2-but-reverse-the-column-order-1" class="section level3">
<h3><span class="header-section-number">11.4.3</span> 3. Same Query as 2, but reverse the column order</h3>
<pre><code>dvdrental=# select manager_staff_id,store_id from store;</code></pre>
<table>
<thead>
<tr class="header">
<th>manager_staff_id</th>
<th>store_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
</tr>
</tbody>
</table>
</div>
<div id="rename-columns-sql-column-alias-in-the-result-set-1" class="section level3">
<h3><span class="header-section-number">11.4.4</span> 4. Rename Columns – SQL column alias in the result set</h3>
<pre><code>dvdrental=# select manager_staff_id mgr_sid,store_id &quot;store id&quot; from store;  </code></pre>
<table>
<thead>
<tr class="header">
<th>mgr_sid</th>
<th>store id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
</tr>
</tbody>
</table>
<pre><code>The manager_staff_id has changed to mgr_sid.
store_id has changed to store id.  In practice, aliasing column names that have a space is not done.

Note that the column names have changed in the result set only, not in the actual database table.  
The DBA&#39;s will not allow a space or other special characters in a database table column name.  

Some motivations for aliasing the result set column names are

  1.  Some database table column names are not user friendly.
  2.  When multiple tables are joined, the column names may be the same in one or more tables and one needs to distinguish between the column names from the different tables.
  </code></pre>
</div>
<div id="adding-labels-and-additional-columns-to-the-result-set-1" class="section level3">
<h3><span class="header-section-number">11.4.5</span> 5. Adding labels and Additional Columns to the Result Set</h3>
<pre><code>dvdrental=# select &#39;derived column&#39; showing
                   ,*
                   ,current_database() db
                   ,user
                   ,to_char(now(),&#39;YYYY/MM/DD HH24:MI:SS&#39;) dtts 
              from store; </code></pre>
<table>
<thead>
<tr class="header">
<th>showing</th>
<th>store_id</th>
<th>manager_staff_id</th>
<th>address_id</th>
<th>last_update</th>
<th>db</th>
<th>user</th>
<th>dtts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>derived column</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>2006-02-15 09:57:12</td>
<td>dvdrental</td>
<td>postgres</td>
<td>2018/10/07 20:20:28</td>
</tr>
<tr class="even">
<td>derived column</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2006-02-15 09:57:12</td>
<td>dvdrental</td>
<td>postgres</td>
<td>2018/10/07 20:20:28</td>
</tr>
</tbody>
</table>
<pre><code>All the previous examples easily fit on a single line.  This one is longer.  Each column is entered on its own line, indented past the select keyword, and preceeded by a comma.  

1.  The showing column is a hard coded string surrounded by single quotes.  Note that single quotes are for hard coded values and double quotes are for column aliases.  
2.  The db and dtts, date timestamp, are new columns generated from Postgres System Information Functions.
3.  Note that `user` is not a function call, no parenthesis.  </code></pre>
</div>
</div>
<div id="sql-comments-1" class="section level2">
<h2><span class="header-section-number">11.5</span> SQL Comments</h2>
<p><a href="https://pgexercises.com/questions/basic" class="uri">https://pgexercises.com/questions/basic</a></p>
<p>SQL supports both a single line comment, preceed the line with two dashes, <code>--</code>, and a C like block comment, \* … */.</p>
<div id="single-line-comment-1" class="section level3">
<h3><span class="header-section-number">11.5.1</span> 6. Single line comment –</h3>
<pre><code>dvdrental=# select &#39;single line comment, dtts&#39; showing       
                  ,*
                  ,current_database() db
                  ,user
--                   ,to_char(now(),&#39;YYYY/MM/DD HH24:MI:SS&#39;) dtts
             from store;</code></pre>
<table>
<thead>
<tr class="header">
<th>showing</th>
<th>store_id</th>
<th>manager_staff_id</th>
<th>address_id</th>
<th>last_update</th>
<th>db</th>
<th>user</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>single line comment, dtts</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>2006-02-15 09:57:12</td>
<td>dvdrental</td>
<td>postgres</td>
</tr>
<tr class="even">
<td>single line comment, dtts</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2006-02-15 09:57:12</td>
<td>dvdrental</td>
<td>postgres</td>
</tr>
</tbody>
</table>
<pre><code>The dtts  line is commented out with the two dashes and is dropped from the end of the result set columns.</code></pre>
</div>
<div id="multi-line-comment-1" class="section level3">
<h3><span class="header-section-number">11.5.2</span> 7. Multi-line comment /*…*/</h3>
<pre><code>dvdrental=# select &#39;block comment drop db, user, and dtts&#39; showing
                  ,*
            /*
                  ,current_database() db
                  ,user
                  ,to_char(now(),&#39;YYYY/MM/DD HH24:MI:SS&#39;) dtts
            */
              from store;
              </code></pre>
<table>
<thead>
<tr class="header">
<th>showing</th>
<th>store_id</th>
<th>manager_staff_id</th>
<th>address_id</th>
<th>last_update</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>block comment drop db, user, and dtts</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>2006-02-15 09:57:12</td>
</tr>
<tr class="even">
<td>block comment drop db, user, and dtts</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2006-02-15 09:57:12</td>
</tr>
</tbody>
</table>
<pre><code>The three columns db, user, and dtts, between the /\* and \*/ have been commented and no longer appear as the end columns of the result set.</code></pre>
</div>
</div>
<div id="from-clause-1" class="section level2">
<h2><span class="header-section-number">11.6</span> FROM Clause</h2>
<p>The <code>FROM</code> clause contains database tables/views from which the <code>SELECT</code> columns are derived. For now, in the examples, we are only using a single table. If the database reflects a relational model, your data is likely spread out over several tables. The key take away when beginning your analysis is to pick the table that has most of the data that you need for your analysis. This table becomes your main or driving table to build your SQL query statement around. After identifying your driving table, potentially save yourself a lot of time and heart ache. Review any view that is built on your driving table. If one or more exist, especially if vendor built, may already have the additional information need for your analysis.</p>
<p>Insert SQL here or link to Views dependent on what</p>
<p>In this tutorial, there is only a single user hitting the database and row/table locking is not necessary and considered out of scope.</p>
<div id="table-uses-1" class="section level3">
<h3><span class="header-section-number">11.6.1</span> Table Uses</h3>
<ul>
<li>A table can be used more than once in a FROM clause. These are self-referencing table. An example is an EMPLOYEE table which contains a foriegn key to her manager. Her manager also has a foriegn key to her manager, etc up the corporate ladder.<br />
</li>
<li><p>In the example above, the EMPLOYEE table plays two roles, employee and manager. The next line shows the FROM clause showing both rows.</p>
<p>FROM EMPLOYEE EE, EMPLOYEE MGR</p></li>
<li>The EE and MGR are role abbreviations for the EMPLOYEE table.<br />
</li>
<li>Since all the column names are exactly the same for the EE and MGR role, the column names need to be prefixed with their role alias, e.g., SELECT MGR.EE_NAME, EE.EE_NAME … shows the manager name and her employee name who work for her.</li>
<li>It is a good habit to always alias your tables and prefix your column names with the table alias to eliminate any ambiguity as to where the column came from. This is critical where there is inconsistent table column naming convention.</li>
<li><p>Cover inline tables in future section</p></li>
</ul>
<pre><code>Side Note: Do not create an unintended Cartesian join.  If one has more than one table in the FROM clause, make sure that every table in the FROM clause joins to at least one other table.  If your result set has an unexpectantly high rowcount and long runtime, check for a missing join in the FROM clause.</code></pre>
</div>
</div>
<div id="where-clause-row-selection-horizontal-partitioning-of-data-1" class="section level2">
<h2><span class="header-section-number">11.7</span> WHERE Clause: Row Selection – Horizontal Partitioning of Data</h2>
<p>In the previous SELECT clause section, the SELECT statement either partitioned data vertically across the table columns or derived vertical column values. This section provides examples that partitions the table data across rows in the table.</p>
<p>The WHERE clause defines all the conditions the data must meet to be included or excluded in the final result set. If all the conditions are met data is returned or it is rejected. This is commonly referred to as the data set filter condition.</p>
<pre><code>Side Note: For performance optimization reasons, the WHERE clause should reduce the dataset down to the smallest dataset as quickly as possible.  This is typically done using indexed columns, range conditions, and any other condition that rejects a lot of rows from being retrieved.</code></pre>
<p>The WHERE condition(s) can be simple or complex, but in the end are the appliction of the logic rules shown in the table below.</p>
<table>
<thead>
<tr class="header">
<th>p</th>
<th>q</th>
<th>p and q</th>
<th>p or q</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>T</td>
<td>T</td>
<td>T</td>
<td>T</td>
</tr>
<tr class="even">
<td>T</td>
<td>F</td>
<td>F</td>
<td>T</td>
</tr>
<tr class="odd">
<td>T</td>
<td>N</td>
<td>N</td>
<td>T</td>
</tr>
<tr class="even">
<td>F</td>
<td>F</td>
<td>F</td>
<td>F</td>
</tr>
<tr class="odd">
<td>F</td>
<td>N</td>
<td>F</td>
<td>T</td>
</tr>
<tr class="even">
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
</tr>
</tbody>
</table>
<p>When the filter logic is complex, it is sometimes easier to represent the where clause symbollically and apply a version of DeMorgan’s law which is shown below.</p>
<ol style="list-style-type: decimal">
<li>(A and B)’ = A’ or B’</li>
<li>(A or B)’ = A’ and B’</li>
</ol>
<div id="example-continued-1" class="section level3">
<h3><span class="header-section-number">11.7.1</span> Example Continued</h3>
<p>We begin with <code>1</code>, our simplest SQL query.</p>
<pre><code>dvdrental=# select * from store;  </code></pre>
<table>
<thead>
<tr class="header">
<th>store_id</th>
<th>manager_staff_id</th>
<th>address_id</th>
<th>last_update</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>1</td>
<td>2006-02-15 09:57:12</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
<td>2</td>
<td>2006-02-15 09:57:12</td>
</tr>
</tbody>
</table>
</div>
<div id="where-condition-logically-never-true.-1" class="section level3">
<h3><span class="header-section-number">11.7.2</span> 7 WHERE condition logically never TRUE.</h3>
<pre><code>dvdrental=# select * from store where 1 = 0;</code></pre>
<table>
<thead>
<tr class="header">
<th>store_id</th>
<th>manager_staff_id</th>
<th>address_id</th>
<th>last_update</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
<pre><code>Since 1 = 0 is always false, no rows are ever returned.  Initially this construct seems useless, but actually is quite handy when debugging large scripts where a portion of the script needs to be turned off or when creating an empty table with the exact same column names and types as the FROM table(s).  </code></pre>
</div>
<div id="where-condition-logically-always-true.-1" class="section level3">
<h3><span class="header-section-number">11.7.3</span> 8 WHERE condition logically always TRUE.</h3>
<pre><code>dvdrental=# select * from store where 1 = 1;</code></pre>
<table>
<thead>
<tr class="header">
<th>store_id</th>
<th>manager_staff_id</th>
<th>address_id</th>
<th>last_update</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>1</td>
<td>2006-02-15 09:57:12</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
<td>2</td>
<td>2006-02-15 09:57:12</td>
</tr>
</tbody>
</table>
<pre><code>Since 1 = 1 is always true, all rows are always returned.  Initially this construct seems useless, but actually is also quite handy when debugging large scripts and creating a backup of table.</code></pre>
</div>
<div id="where-equality-condition-1" class="section level3">
<h3><span class="header-section-number">11.7.4</span> 9 WHERE equality condition</h3>
<pre><code>dvdrental=# select * from store where store_id = 2;</code></pre>
<table>
<thead>
<tr class="header">
<th>store_id</th>
<th>manager_staff_id</th>
<th>address_id</th>
<th>last_update</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2</td>
<td>2</td>
<td>2</td>
<td>2006-02-15 09:57:12</td>
</tr>
</tbody>
</table>
<pre><code>    The only row where the store_id = 2 is row 2.  Only row 2 is kept and all others are dropped.
    </code></pre>
</div>
<div id="where-not-equal-conditions-1" class="section level3">
<h3><span class="header-section-number">11.7.5</span> 10 WHERE NOT equal conditions</h3>
<pre><code>dvdrental=# select * from store where store_id &lt;&gt; 2;  # &lt;&gt; syntactically the same as !=</code></pre>
<table>
<thead>
<tr class="header">
<th>store_id</th>
<th>manager_staff_id</th>
<th>address_id</th>
<th>last_update</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>1</td>
<td>2006-02-15 09:57:12</td>
</tr>
</tbody>
</table>
<pre><code>    The only row where the store_id &lt;&gt; 2 is row 1.  Only row 1 is kept and all others are dropped.</code></pre>
</div>
<div id="where-or-condition-1" class="section level3">
<h3><span class="header-section-number">11.7.6</span> 10 WHERE OR condition</h3>
<pre><code>dvdrental=# select * from store where manager_staff_id = 1 or store_id &lt;&gt; 2 or address_id = 3; </code></pre>
<p>Following table is modified from <a href="http://www.tutorialspoint.com/sql/sql-operators" class="uri">http://www.tutorialspoint.com/sql/sql-operators</a></p>
<p>SQL Comparison Operators</p>
<table>
<colgroup>
<col width="10%" />
<col width="75%" />
<col width="14%" />
</colgroup>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
<th>example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>=</td>
<td>Checks if the values of two operands are equal or not, if yes then condition becomes true.</td>
<td>(a = b) is not true.</td>
</tr>
<tr class="even">
<td>!=</td>
<td>Checks if the values of two operands are equal or not, if values are not equal then condition becomes true.</td>
<td>(a != b) is true.</td>
</tr>
<tr class="odd">
<td>&lt;&gt;</td>
<td>Checks if the values of two operands are equal or not, if values are not equal then condition becomes true.</td>
<td>(a &lt;&gt; b) is true.</td>
</tr>
<tr class="even">
<td>&gt;</td>
<td>Checks if the value of left operand is greater than the value of right operand, if yes then condition becomes true.</td>
<td>(a &gt; b) is not true.</td>
</tr>
<tr class="odd">
<td>&lt;</td>
<td>Checks if the value of left operand is less than the value of right operand, if yes then condition becomes true.</td>
<td>(a &lt; b) is true.</td>
</tr>
<tr class="even">
<td>&gt;=</td>
<td>Checks if the value of left operand is greater than or equal to the value of right operand, if yes then condition becomes true.</td>
<td>(a &gt;= b) is not true.</td>
</tr>
<tr class="odd">
<td>&lt;=</td>
<td>Checks if the value of left operand is less than or equal to the value of right operand, if yes then condition becomes true.</td>
<td>(a &lt;= b) is true.</td>
</tr>
<tr class="even">
<td>!&lt;</td>
<td>Checks if the value of left operand is not less than the value of right operand, if yes then condition becomes true.</td>
<td>(a !&lt; b) is false.</td>
</tr>
<tr class="odd">
<td>!&gt;</td>
<td>Checks if the value of left operand is not greater than the value of right operand, if yes then condition becomes true.</td>
<td>(a !&gt; b) is true.</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col width="8%" />
<col width="91%" />
</colgroup>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ALL</td>
<td>The ALL operator is used to compare a value to all values in another value set.</td>
</tr>
<tr class="even">
<td>AND</td>
<td>The AND operator allows the existence of multiple conditions in an SQL statement’s WHERE clause.</td>
</tr>
<tr class="odd">
<td>ANY</td>
<td>The ANY operator is used to compare a value to any applicable value in the list as per the condition.</td>
</tr>
<tr class="even">
<td>BETWEEN</td>
<td>The BETWEEN operator is used to search for values that are within a set of values, given the minimum value and the maximum value.</td>
</tr>
<tr class="odd">
<td>EXISTS</td>
<td>The EXISTS operator is used to search for the presence of a row in a specified table that meets a certain criterion.</td>
</tr>
<tr class="even">
<td>IN</td>
<td>The IN operator is used to compare a value to a list of literal values that have been specified.</td>
</tr>
<tr class="odd">
<td>LIKE</td>
<td>The LIKE operator is used to compare a value to similar values using wildcard operators.</td>
</tr>
<tr class="even">
<td>NOT</td>
<td>The NOT operator reverses the meaning of the logical operator with which it is used. Eg: NOT EXISTS, NOT BETWEEN, NOT IN, etc. This is a negate operator.</td>
</tr>
<tr class="odd">
<td>OR</td>
<td>The OR operator is used to combine multiple conditions in an SQL statement’s WHERE clause.</td>
</tr>
<tr class="even">
<td>IS NULL</td>
<td>The NULL operator is used to compare a value with a NULL value.</td>
</tr>
<tr class="odd">
<td>UNIQUE</td>
<td>The UNIQUE operator searches every row of a specified table for uniqueness (no duplicates).</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="to-dos" class="section level2">
<h2><span class="header-section-number">11.8</span> TO-DO’s</h2>
<ol style="list-style-type: decimal">
<li>inline tables</li>
<li>correlated subqueries</li>
<li><p>Binding order</p>
<p>3.1 FROM
3.2 ON
3.3 JOIN
3.4 WHERE
3.5 GROUP BY
3.6 WITH CUBE/ROLLUP
3.7 HAVING
3.8 SELECT
3.9 DISTINCT
3.10 ORDER BY
3.11 TOP
3.12 OFFSET/FETCH</p></li>
<li>dplyr comparison of select features</li>
<li>dplyr comparison of fetch versus where.</li>
<li>SQL for View table dependencies.</li>
<li><p>Add cartesian join exercise.</p></li>
</ol>

<p>Start up the <code>docker-pet</code> container</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb200-1" data-line-number="1"><span class="kw">sp_docker_start</span>(<span class="st">&quot;sql-pet&quot;</span>)</a></code></pre></div>
<p>Now connect to the <code>dvdrental</code> database with R</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb201-1" data-line-number="1">con &lt;-<span class="st"> </span><span class="kw">sp_get_postgres_connection</span>(</a>
<a class="sourceLine" id="cb201-2" data-line-number="2">  <span class="dt">user =</span> <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_USER_NAME&quot;</span>),</a>
<a class="sourceLine" id="cb201-3" data-line-number="3">  <span class="dt">password =</span>  <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_PASSWORD&quot;</span>),</a>
<a class="sourceLine" id="cb201-4" data-line-number="4">  <span class="dt">dbname =</span> <span class="st">&quot;dvdrental&quot;</span>,</a>
<a class="sourceLine" id="cb201-5" data-line-number="5">  <span class="dt">seconds_to_test =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb201-6" data-line-number="6">con</a></code></pre></div>
<pre><code>## &lt;PqConnection&gt; dvdrental@localhost:5432</code></pre>
<div id="which-database" class="section level3">
<h3><span class="header-section-number">11.8.1</span> Which database?</h3>
<p>Your DBA will create your user accounts and priviledges for the database(s) that you can access.</p>
<p>One of the challenges when working with a database(s) is finding where your data actually resides. Your best resources will be one or more subject matter experts, <code>SME</code>, and your DBA. Your data may actually reside in multiple databases, e.g., a detail and summary databases. In our tutorial, we focus on the one database, <code>dvdrental</code>. Database names usually reflect something about the data that they contain.</p>
<p>Your laptop is a server for the Docker Postgres databases. A database is a collection of files that Postgres manages in the background.</p>
</div>
<div id="how-many-databases-reside-in-the-docker-container" class="section level3">
<h3><span class="header-section-number">11.8.2</span> How many databases reside in the Docker Container?</h3>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb203-1" data-line-number="1">rs &lt;-</a>
<a class="sourceLine" id="cb203-2" data-line-number="2"><span class="st">  </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(</a>
<a class="sourceLine" id="cb203-3" data-line-number="3">  con,</a>
<a class="sourceLine" id="cb203-4" data-line-number="4">  <span class="st">&quot;SELECT &#39;DB Names in Docker&#39; showing</span></a>
<a class="sourceLine" id="cb203-5" data-line-number="5"><span class="st">          ,datname DB</span></a>
<a class="sourceLine" id="cb203-6" data-line-number="6"><span class="st">     FROM pg_database</span></a>
<a class="sourceLine" id="cb203-7" data-line-number="7"><span class="st">    WHERE datistemplate = false;</span></a>
<a class="sourceLine" id="cb203-8" data-line-number="8"><span class="st">  &quot;</span></a>
<a class="sourceLine" id="cb203-9" data-line-number="9">  )</a>
<a class="sourceLine" id="cb203-10" data-line-number="10"><span class="kw">kable</span>(rs)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">db</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">DB Names in Docker</td>
<td align="left">postgres</td>
</tr>
<tr class="even">
<td align="left">DB Names in Docker</td>
<td align="left">dvdrental</td>
</tr>
</tbody>
</table>
<p>Which databases are available?</p>
<pre><code>Modify the connection call to connect to the `postgres` database.</code></pre>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb205-1" data-line-number="1">con &lt;-<span class="st"> </span><span class="kw">sp_get_postgres_connection</span>(</a>
<a class="sourceLine" id="cb205-2" data-line-number="2">  <span class="dt">user =</span> <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_USER_NAME&quot;</span>),</a>
<a class="sourceLine" id="cb205-3" data-line-number="3">  <span class="dt">password =</span>  <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_PASSWORD&quot;</span>),</a>
<a class="sourceLine" id="cb205-4" data-line-number="4">  <span class="dt">dbname =</span> <span class="st">&quot;your code goes here&quot;</span>,</a>
<a class="sourceLine" id="cb205-5" data-line-number="5">  <span class="dt">seconds_to_test =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb205-6" data-line-number="6"></a>
<a class="sourceLine" id="cb205-7" data-line-number="7">con</a></code></pre></div>
<pre><code>## [1] &quot;There is no connection&quot;</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb207-1" data-line-number="1"><span class="cf">if</span> (con <span class="op">!=</span><span class="st"> &#39;There is no connection&#39;</span>)</a>
<a class="sourceLine" id="cb207-2" data-line-number="2">    <span class="kw">dbDisconnect</span>(con)</a>
<a class="sourceLine" id="cb207-3" data-line-number="3"></a>
<a class="sourceLine" id="cb207-4" data-line-number="4"><span class="co">#Answer: con &lt;PqConnection&gt; postgres@localhost:5432</span></a>
<a class="sourceLine" id="cb207-5" data-line-number="5"></a>
<a class="sourceLine" id="cb207-6" data-line-number="6"><span class="co"># Reconnect to dvdrental</span></a>
<a class="sourceLine" id="cb207-7" data-line-number="7"></a>
<a class="sourceLine" id="cb207-8" data-line-number="8">con &lt;-<span class="st"> </span><span class="kw">sp_get_postgres_connection</span>(</a>
<a class="sourceLine" id="cb207-9" data-line-number="9">  <span class="dt">user =</span> <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_USER_NAME&quot;</span>),</a>
<a class="sourceLine" id="cb207-10" data-line-number="10">  <span class="dt">password =</span>  <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_PASSWORD&quot;</span>),</a>
<a class="sourceLine" id="cb207-11" data-line-number="11">  <span class="dt">dbname =</span> <span class="st">&quot;dvdrental&quot;</span>,</a>
<a class="sourceLine" id="cb207-12" data-line-number="12">  <span class="dt">seconds_to_test =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb207-13" data-line-number="13">con</a></code></pre></div>
<pre><code>## &lt;PqConnection&gt; dvdrental@localhost:5432</code></pre>
<p>Note that the two Sys.getenv function calls work in this tutorial because both the user and password are available in both databases. This is a common practice in organinzations that have implemented single sign on across their organization.</p>
<pre><code>Gotcha:

   If one has data in multiple databases or multiple environments, Development, Integration, and Prodution, it is very easy to connect to the wrong database in the wrong environment.  Always double check your connection information when logging in and before performing any inserts, updates, or deletes against the database.</code></pre>
<p>The following code block should be used to reduce propagating the above gotcha. Current_database(), CURRENT_DATE or CURRENT_TIMESTAMP, and ‘result set’ are the most useful and last three not so much. Instead of the host IP address having the actual hostname would be a nice addition.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb210-1" data-line-number="1">rs1 &lt;-</a>
<a class="sourceLine" id="cb210-2" data-line-number="2"><span class="st">  </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(</a>
<a class="sourceLine" id="cb210-3" data-line-number="3">  con,</a>
<a class="sourceLine" id="cb210-4" data-line-number="4">  <span class="st">&quot;SELECT current_database() DB</span></a>
<a class="sourceLine" id="cb210-5" data-line-number="5"><span class="st">         ,CURRENT_DATE</span></a>
<a class="sourceLine" id="cb210-6" data-line-number="6"><span class="st">         ,CURRENT_TIMESTAMP</span></a>
<a class="sourceLine" id="cb210-7" data-line-number="7"><span class="st">         ,&#39;result set description&#39; showing</span></a>
<a class="sourceLine" id="cb210-8" data-line-number="8"><span class="st">         ,session_user</span></a>
<a class="sourceLine" id="cb210-9" data-line-number="9"><span class="st">         ,inet_server_addr() host</span></a>
<a class="sourceLine" id="cb210-10" data-line-number="10"><span class="st">         ,inet_server_port() port</span></a>
<a class="sourceLine" id="cb210-11" data-line-number="11"><span class="st">  &quot;</span></a>
<a class="sourceLine" id="cb210-12" data-line-number="12">  )</a>
<a class="sourceLine" id="cb210-13" data-line-number="13"><span class="kw">kable</span>(display_rows)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">5</td>
</tr>
</tbody>
</table>
<p>Since we will only be working in the <code>dvdrental</code> database in this tutorial and reduce the number of output columns shown, only the ‘result set description’ will be used.</p>
</div>
<div id="which-schema" class="section level3">
<h3><span class="header-section-number">11.8.3</span> Which Schema?</h3>
<p>In the code block below, we look at the <code>information_schema.table</code> which contains information about all the schemas and table/views within our dvdrental database. Databases can have one or more schemas, containers that hold tables or views. Schemas partition the database into big logical blocks of related data. Schema names usually reflect an application or logically related datasets. Occasionally a DBA will set up a new schema and use a users name.</p>
<p>What schemas are in the <code>dvdrental</code> database?
How many entries are in each schema?</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb211-1" data-line-number="1">## Database Schemas</a>
<a class="sourceLine" id="cb211-2" data-line-number="2"><span class="co">#  </span></a>
<a class="sourceLine" id="cb211-3" data-line-number="3">rs1 &lt;-</a>
<a class="sourceLine" id="cb211-4" data-line-number="4"><span class="st">  </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(</a>
<a class="sourceLine" id="cb211-5" data-line-number="5">  con,</a>
<a class="sourceLine" id="cb211-6" data-line-number="6">  <span class="st">&quot;SELECT &#39;DB Schemas&#39; showing,t.table_catalog DB,t.table_schema,COUNT(*) tbl_vws</span></a>
<a class="sourceLine" id="cb211-7" data-line-number="7"><span class="st">     FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb211-8" data-line-number="8"><span class="st">    GROUP BY t.table_catalog,t.table_schema</span></a>
<a class="sourceLine" id="cb211-9" data-line-number="9"><span class="st">  &quot;</span></a>
<a class="sourceLine" id="cb211-10" data-line-number="10">  )</a>
<a class="sourceLine" id="cb211-11" data-line-number="11"><span class="kw">kable</span>(rs1)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">db</th>
<th align="left">table_schema</th>
<th align="right">tbl_vws</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">DB Schemas</td>
<td align="left">dvdrental</td>
<td align="left">pg_catalog</td>
<td align="right">121</td>
</tr>
<tr class="even">
<td align="left">DB Schemas</td>
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="right">22</td>
</tr>
<tr class="odd">
<td align="left">DB Schemas</td>
<td align="left">dvdrental</td>
<td align="left">information_schema</td>
<td align="right">67</td>
</tr>
</tbody>
</table>
<p>We see that there are three schemas. The pg_catalog is the standard PostgreSQL meta data and core schema. Postgres uses this schema to manage the internal workings of the database. DBA’s are the primary users of pg_catalog. We used the pg_catalog schema to answer the question ‘How many databases reside in the Docker Container?’, but normally the data analyst is not interested in analyzing database data.</p>
<p>The information_schema contains ANSI standardized views used across the different SQL vendors, (Oracle, Sysbase, MS SQL Server, IBM DB2, etc). The information_schema contains a plethora of metadata that will help you locate your data tables, understand the relationships between the tables, and write efficient SQL queries.</p>
</div>
<div id="exercises-1" class="section level3">
<h3><span class="header-section-number">11.8.4</span> Exercises</h3>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb212-1" data-line-number="1"><span class="co">#</span></a>
<a class="sourceLine" id="cb212-2" data-line-number="2"><span class="co"># Add an order by clause to order the output by the table catalog.</span></a>
<a class="sourceLine" id="cb212-3" data-line-number="3">rs1 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;1. ORDER BY table_catalog&#39; showing</span></a>
<a class="sourceLine" id="cb212-4" data-line-number="4"><span class="st">                                  ,t.table_catalog DB,t.table_schema,COUNT(*) tbl_vws </span></a>
<a class="sourceLine" id="cb212-5" data-line-number="5"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb212-6" data-line-number="6"><span class="st">                            GROUP BY t.table_catalog,t.table_schema</span></a>
<a class="sourceLine" id="cb212-7" data-line-number="7"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb212-8" data-line-number="8">                      )</a>
<a class="sourceLine" id="cb212-9" data-line-number="9"><span class="kw">kable</span>(rs1)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">db</th>
<th align="left">table_schema</th>
<th align="right">tbl_vws</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1. ORDER BY table_catalog</td>
<td align="left">dvdrental</td>
<td align="left">pg_catalog</td>
<td align="right">121</td>
</tr>
<tr class="even">
<td align="left">1. ORDER BY table_catalog</td>
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="right">22</td>
</tr>
<tr class="odd">
<td align="left">1. ORDER BY table_catalog</td>
<td align="left">dvdrental</td>
<td align="left">information_schema</td>
<td align="right">67</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb213-1" data-line-number="1"><span class="co"># Add an order by clause to order the output by tbl_vws in descending order.</span></a>
<a class="sourceLine" id="cb213-2" data-line-number="2">rs2 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;2. ORDER BY tbl_vws desc&#39; showing</span></a>
<a class="sourceLine" id="cb213-3" data-line-number="3"><span class="st">                                  ,t.table_catalog DB,t.table_schema,COUNT(*) tbl_vws </span></a>
<a class="sourceLine" id="cb213-4" data-line-number="4"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb213-5" data-line-number="5"><span class="st">                            GROUP BY t.table_catalog,t.table_schema</span></a>
<a class="sourceLine" id="cb213-6" data-line-number="6"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb213-7" data-line-number="7">                      )</a>
<a class="sourceLine" id="cb213-8" data-line-number="8"><span class="kw">kable</span>(rs2)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">db</th>
<th align="left">table_schema</th>
<th align="right">tbl_vws</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2. ORDER BY tbl_vws desc</td>
<td align="left">dvdrental</td>
<td align="left">pg_catalog</td>
<td align="right">121</td>
</tr>
<tr class="even">
<td align="left">2. ORDER BY tbl_vws desc</td>
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="right">22</td>
</tr>
<tr class="odd">
<td align="left">2. ORDER BY tbl_vws desc</td>
<td align="left">dvdrental</td>
<td align="left">information_schema</td>
<td align="right">67</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb214-1" data-line-number="1"><span class="co"># Complete the SQL statement to show everything about all the tables.</span></a>
<a class="sourceLine" id="cb214-2" data-line-number="2"></a>
<a class="sourceLine" id="cb214-3" data-line-number="3">rs3 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;3. all information_schema tables&#39; showing</span></a>
<a class="sourceLine" id="cb214-4" data-line-number="4"><span class="st">                                  ,&#39;your code goes here&#39; </span></a>
<a class="sourceLine" id="cb214-5" data-line-number="5"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb214-6" data-line-number="6"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb214-7" data-line-number="7">                      )</a>
<a class="sourceLine" id="cb214-8" data-line-number="8"><span class="kw">kable</span>(<span class="kw">head</span> (rs3,display_rows))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">?column?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">3. all information_schema tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="even">
<td align="left">3. all information_schema tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="odd">
<td align="left">3. all information_schema tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="even">
<td align="left">3. all information_schema tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="odd">
<td align="left">3. all information_schema tables</td>
<td align="left">your code goes here</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb215-1" data-line-number="1"><span class="co"># Use the results from above to pull interesting columns from just the information_schema</span></a>
<a class="sourceLine" id="cb215-2" data-line-number="2">rs4 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;4. information_schema.tables&#39; showing</span></a>
<a class="sourceLine" id="cb215-3" data-line-number="3"><span class="st">                                  ,&#39;your code goes here&#39; </span></a>
<a class="sourceLine" id="cb215-4" data-line-number="4"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb215-5" data-line-number="5"><span class="st">                             where &#39;your code goes here&#39; = &#39;your code goes here&#39;</span></a>
<a class="sourceLine" id="cb215-6" data-line-number="6"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb215-7" data-line-number="7">                      )</a>
<a class="sourceLine" id="cb215-8" data-line-number="8"><span class="kw">head</span>(rs4,display_rows)</a></code></pre></div>
<pre><code>##                        showing            ?column?
## 1 4. information_schema.tables your code goes here
## 2 4. information_schema.tables your code goes here
## 3 4. information_schema.tables your code goes here
## 4 4. information_schema.tables your code goes here
## 5 4. information_schema.tables your code goes here</code></pre>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb217-1" data-line-number="1"><span class="co"># Modify the SQL below with your interesting column names.</span></a>
<a class="sourceLine" id="cb217-2" data-line-number="2"><span class="co"># Update the where clause to return only rows from the information schema and begin with &#39;tab&#39;</span></a>
<a class="sourceLine" id="cb217-3" data-line-number="3">rs5 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;5. information_schema.tables&#39; showing</span></a>
<a class="sourceLine" id="cb217-4" data-line-number="4"><span class="st">                                  ,&#39;your code goes here&#39; </span></a>
<a class="sourceLine" id="cb217-5" data-line-number="5"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb217-6" data-line-number="6"><span class="st">                             where &#39;your code goes here&#39; = &#39;your code goes here&#39;</span></a>
<a class="sourceLine" id="cb217-7" data-line-number="7"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb217-8" data-line-number="8">                      )</a>
<a class="sourceLine" id="cb217-9" data-line-number="9"><span class="kw">kable</span>(<span class="kw">head</span>(rs5,display_rows))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">?column?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">5. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="even">
<td align="left">5. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="odd">
<td align="left">5. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="even">
<td align="left">5. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="odd">
<td align="left">5. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb218-1" data-line-number="1"><span class="co"># Modify the SQL below with your interesting column names.</span></a>
<a class="sourceLine" id="cb218-2" data-line-number="2"><span class="co"># Update the where clause to return only rows from the information schema and begin with &#39;col&#39;</span></a>
<a class="sourceLine" id="cb218-3" data-line-number="3">rs6 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;6. information_schema.tables&#39; showing</span></a>
<a class="sourceLine" id="cb218-4" data-line-number="4"><span class="st">                                  ,&#39;your code goes here&#39; </span></a>
<a class="sourceLine" id="cb218-5" data-line-number="5"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb218-6" data-line-number="6"><span class="st">                             where &#39;your code goes here&#39; = &#39;your code goes here&#39;</span></a>
<a class="sourceLine" id="cb218-7" data-line-number="7"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb218-8" data-line-number="8">                      )</a>
<a class="sourceLine" id="cb218-9" data-line-number="9"><span class="kw">kable</span>(<span class="kw">head</span>(rs6,display_rows))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">?column?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">6. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="even">
<td align="left">6. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="odd">
<td align="left">6. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="even">
<td align="left">6. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="odd">
<td align="left">6. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
</tbody>
</table>
<p>In the next exercise we combine both the table and column output from the previous exercises. Review the following code block. The last two lines of the WHERE clause are swithced. Will the result set be the same or different? Execute the code block and review the two datasets.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb219-1" data-line-number="1">rs7 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;7. information_schema.tables&#39; showing</span></a>
<a class="sourceLine" id="cb219-2" data-line-number="2"><span class="st">                                  ,table_catalog||&#39;.&#39;||table_schema db_info, table_name, table_type</span></a>
<a class="sourceLine" id="cb219-3" data-line-number="3"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb219-4" data-line-number="4"><span class="st">                             where table_schema = &#39;information_schema&#39;</span></a>
<a class="sourceLine" id="cb219-5" data-line-number="5"><span class="st">                               and table_name like &#39;table%&#39; OR table_name like &#39;%col%&#39;</span></a>
<a class="sourceLine" id="cb219-6" data-line-number="6"><span class="st">                               and table_type = &#39;VIEW&#39;</span></a>
<a class="sourceLine" id="cb219-7" data-line-number="7"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb219-8" data-line-number="8">                      )</a>
<a class="sourceLine" id="cb219-9" data-line-number="9"><span class="kw">kable</span>(<span class="kw">head</span>(rs7,display_rows))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">db_info</th>
<th align="left">table_name</th>
<th align="left">table_type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">7. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">collations</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">7. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">collation_character_set_applicability</td>
<td align="left">VIEW</td>
</tr>
<tr class="odd">
<td align="left">7. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">column_domain_usage</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">7. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">column_privileges</td>
<td align="left">VIEW</td>
</tr>
<tr class="odd">
<td align="left">7. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">column_udt_usage</td>
<td align="left">VIEW</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb220-1" data-line-number="1">rs8 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;8. information_schema.tables&#39; showing</span></a>
<a class="sourceLine" id="cb220-2" data-line-number="2"><span class="st">                                  ,table_catalog||&#39;.&#39;||table_schema db_info, table_name, table_type</span></a>
<a class="sourceLine" id="cb220-3" data-line-number="3"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb220-4" data-line-number="4"><span class="st">                             where table_schema = &#39;information_schema&#39;</span></a>
<a class="sourceLine" id="cb220-5" data-line-number="5"><span class="st">                               and table_type = &#39;VIEW&#39;</span></a>
<a class="sourceLine" id="cb220-6" data-line-number="6"><span class="st">                               and table_name like &#39;table%&#39; OR table_name like &#39;%col%&#39;</span></a>
<a class="sourceLine" id="cb220-7" data-line-number="7"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb220-8" data-line-number="8">                      )</a>
<a class="sourceLine" id="cb220-9" data-line-number="9"><span class="kw">kable</span>(<span class="kw">head</span>(rs8,display_rows))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">db_info</th>
<th align="left">table_name</th>
<th align="left">table_type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">8. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">column_options</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">8. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">_pg_foreign_table_columns</td>
<td align="left">VIEW</td>
</tr>
<tr class="odd">
<td align="left">8. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">view_column_usage</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">8. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">triggered_update_columns</td>
<td align="left">VIEW</td>
</tr>
<tr class="odd">
<td align="left">8. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">tables</td>
<td align="left">VIEW</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th>Operator/Element</th>
<th>Associativity</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>.</td>
<td>left</td>
<td>table/column name separator</td>
</tr>
<tr class="even">
<td>::</td>
<td>left</td>
<td>PostgreSQL-style typecast</td>
</tr>
<tr class="odd">
<td><a href="joins-and-complex-queries-13.html#section"></a></td>
<td>left</td>
<td>array element selection</td>
</tr>
<tr class="even">
<td>-</td>
<td>right</td>
<td>unary minus</td>
</tr>
<tr class="odd">
<td>^</td>
<td>left</td>
<td>exponentiation</td>
</tr>
<tr class="even">
<td>* / %</td>
<td>left</td>
<td>multiplication, division, modulo</td>
</tr>
<tr class="odd">
<td>+ -</td>
<td>left</td>
<td>addition, subtraction</td>
</tr>
<tr class="even">
<td>IS</td>
<td></td>
<td>IS TRUE, IS FALSE, IS UNKNOWN, IS NULL</td>
</tr>
<tr class="odd">
<td>ISNULL</td>
<td></td>
<td>test for null</td>
</tr>
<tr class="even">
<td>NOTNULL</td>
<td></td>
<td>test for not null</td>
</tr>
<tr class="odd">
<td>(any other)</td>
<td>left</td>
<td>all other native and user-defined operators</td>
</tr>
<tr class="even">
<td>IN</td>
<td></td>
<td>set membership</td>
</tr>
<tr class="odd">
<td>BETWEEN</td>
<td></td>
<td>range containment</td>
</tr>
<tr class="even">
<td>OVERLAPS</td>
<td></td>
<td>time interval overlap</td>
</tr>
<tr class="odd">
<td>LIKE ILIKE SIMILAR</td>
<td></td>
<td>string pattern matching</td>
</tr>
<tr class="even">
<td>&lt; &gt;</td>
<td></td>
<td>less than, greater than</td>
</tr>
<tr class="odd">
<td>=</td>
<td>right</td>
<td>equality, assignment</td>
</tr>
<tr class="even">
<td>NOT</td>
<td>right</td>
<td>logical negation</td>
</tr>
<tr class="odd">
<td>AND</td>
<td>left</td>
<td>logical conjunction</td>
</tr>
<tr class="even">
<td>OR</td>
<td>left</td>
<td>logical disjunction</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb221-1" data-line-number="1">rs1 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT t.table_catalog DB ,t.table_schema</span></a>
<a class="sourceLine" id="cb221-2" data-line-number="2"><span class="st">                                  ,t.table_name,t.table_type</span></a>
<a class="sourceLine" id="cb221-3" data-line-number="3"><span class="st">                              FROM information_schema.tables t&quot;</span>)</a>
<a class="sourceLine" id="cb221-4" data-line-number="4"></a>
<a class="sourceLine" id="cb221-5" data-line-number="5">rs2 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT t.table_catalog DB ,t.table_schema</span></a>
<a class="sourceLine" id="cb221-6" data-line-number="6"><span class="st">                                  ,t.table_type,COUNT(*) tbls</span></a>
<a class="sourceLine" id="cb221-7" data-line-number="7"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb221-8" data-line-number="8"><span class="st">                            group by t.table_catalog ,t.table_schema</span></a>
<a class="sourceLine" id="cb221-9" data-line-number="9"><span class="st">                                  ,t.table_type</span></a>
<a class="sourceLine" id="cb221-10" data-line-number="10"><span class="st">                            &quot;</span>)</a>
<a class="sourceLine" id="cb221-11" data-line-number="11"></a>
<a class="sourceLine" id="cb221-12" data-line-number="12">rs3 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT distinct t.table_catalog DB ,t.table_schema</span></a>
<a class="sourceLine" id="cb221-13" data-line-number="13"><span class="st">                                  ,t.table_type tbls</span></a>
<a class="sourceLine" id="cb221-14" data-line-number="14"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb221-15" data-line-number="15"><span class="st">                            &quot;</span>)</a>
<a class="sourceLine" id="cb221-16" data-line-number="16"></a>
<a class="sourceLine" id="cb221-17" data-line-number="17"></a>
<a class="sourceLine" id="cb221-18" data-line-number="18"></a>
<a class="sourceLine" id="cb221-19" data-line-number="19"><span class="co">#kable(head(rs1 %&gt;% arrange (table_name)))</span></a>
<a class="sourceLine" id="cb221-20" data-line-number="20"><span class="kw">kable</span>(<span class="kw">head</span>(rs1))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">db</th>
<th align="left">table_schema</th>
<th align="left">table_name</th>
<th align="left">table_type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">actor_info</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">customer_list</td>
<td align="left">VIEW</td>
</tr>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">film_list</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">nicer_but_slower_film_list</td>
<td align="left">VIEW</td>
</tr>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">sales_by_film_category</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">staff</td>
<td align="left">BASE TABLE</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb222-1" data-line-number="1"><span class="kw">kable</span>(<span class="kw">head</span>(rs2))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">db</th>
<th align="left">table_schema</th>
<th align="left">table_type</th>
<th align="right">tbls</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">information_schema</td>
<td align="left">BASE TABLE</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">information_schema</td>
<td align="left">VIEW</td>
<td align="right">60</td>
</tr>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">pg_catalog</td>
<td align="left">BASE TABLE</td>
<td align="right">62</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">BASE TABLE</td>
<td align="right">15</td>
</tr>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">VIEW</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">pg_catalog</td>
<td align="left">VIEW</td>
<td align="right">59</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb223-1" data-line-number="1"><span class="kw">kable</span>(<span class="kw">head</span>(rs3))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">db</th>
<th align="left">table_schema</th>
<th align="left">tbls</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">information_schema</td>
<td align="left">BASE TABLE</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">information_schema</td>
<td align="left">VIEW</td>
</tr>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">pg_catalog</td>
<td align="left">BASE TABLE</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">BASE TABLE</td>
</tr>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">pg_catalog</td>
<td align="left">VIEW</td>
</tr>
</tbody>
</table>
<p>www.dataquest.io/blog/postgres-internals</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb224-1" data-line-number="1">## Explain a `dplyr::join</a>
<a class="sourceLine" id="cb224-2" data-line-number="2"></a>
<a class="sourceLine" id="cb224-3" data-line-number="3">tbl_pk_fk_df &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,</a>
<a class="sourceLine" id="cb224-4" data-line-number="4"><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb224-5" data-line-number="5"><span class="st">SELECT --t.table_catalog,t.table_schema,</span></a>
<a class="sourceLine" id="cb224-6" data-line-number="6"><span class="st">   c.table_name</span></a>
<a class="sourceLine" id="cb224-7" data-line-number="7"><span class="st">    ,kcu.column_name</span></a>
<a class="sourceLine" id="cb224-8" data-line-number="8"><span class="st">    ,c.constraint_name</span></a>
<a class="sourceLine" id="cb224-9" data-line-number="9"><span class="st">    ,c.constraint_type</span></a>
<a class="sourceLine" id="cb224-10" data-line-number="10"><span class="st">    ,coalesce(c2.table_name, &#39;&#39;) ref_table</span></a>
<a class="sourceLine" id="cb224-11" data-line-number="11"><span class="st">    ,coalesce(kcu2.column_name, &#39;&#39;) ref_table_col</span></a>
<a class="sourceLine" id="cb224-12" data-line-number="12"><span class="st">FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb224-13" data-line-number="13"><span class="st">LEFT JOIN information_schema.table_constraints c</span></a>
<a class="sourceLine" id="cb224-14" data-line-number="14"><span class="st">  ON t.table_catalog = c.table_catalog</span></a>
<a class="sourceLine" id="cb224-15" data-line-number="15"><span class="st">    AND t.table_schema = c.table_schema</span></a>
<a class="sourceLine" id="cb224-16" data-line-number="16"><span class="st">    AND t.table_name = c.table_name</span></a>
<a class="sourceLine" id="cb224-17" data-line-number="17"><span class="st">LEFT JOIN information_schema.key_column_usage kcu</span></a>
<a class="sourceLine" id="cb224-18" data-line-number="18"><span class="st">    ON c.constraint_schema = kcu.constraint_schema</span></a>
<a class="sourceLine" id="cb224-19" data-line-number="19"><span class="st">        AND c.constraint_name = kcu.constraint_name</span></a>
<a class="sourceLine" id="cb224-20" data-line-number="20"><span class="st">LEFT JOIN information_schema.referential_constraints rc</span></a>
<a class="sourceLine" id="cb224-21" data-line-number="21"><span class="st">    ON c.constraint_schema = rc.constraint_schema</span></a>
<a class="sourceLine" id="cb224-22" data-line-number="22"><span class="st">        AND c.constraint_name = rc.constraint_name</span></a>
<a class="sourceLine" id="cb224-23" data-line-number="23"><span class="st">LEFT JOIN information_schema.table_constraints c2</span></a>
<a class="sourceLine" id="cb224-24" data-line-number="24"><span class="st">    ON rc.unique_constraint_schema = c2.constraint_schema</span></a>
<a class="sourceLine" id="cb224-25" data-line-number="25"><span class="st">        AND rc.unique_constraint_name = c2.constraint_name</span></a>
<a class="sourceLine" id="cb224-26" data-line-number="26"><span class="st">LEFT JOIN information_schema.key_column_usage kcu2</span></a>
<a class="sourceLine" id="cb224-27" data-line-number="27"><span class="st">    ON c2.constraint_schema = kcu2.constraint_schema</span></a>
<a class="sourceLine" id="cb224-28" data-line-number="28"><span class="st">        AND c2.constraint_name = kcu2.constraint_name</span></a>
<a class="sourceLine" id="cb224-29" data-line-number="29"><span class="st">        AND kcu.ordinal_position = kcu2.ordinal_position</span></a>
<a class="sourceLine" id="cb224-30" data-line-number="30"><span class="st">WHERE c.constraint_type IN (&#39;PRIMARY KEY&#39;, &#39;FOREIGN KEY&#39;)</span></a>
<a class="sourceLine" id="cb224-31" data-line-number="31"><span class="st">  AND c.table_catalog = &#39;dvdrental&#39;</span></a>
<a class="sourceLine" id="cb224-32" data-line-number="32"><span class="st">    AND c.table_schema = &#39;public&#39;</span></a>
<a class="sourceLine" id="cb224-33" data-line-number="33"><span class="st">ORDER BY c.table_name;</span></a>
<a class="sourceLine" id="cb224-34" data-line-number="34"><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb224-35" data-line-number="35"></a>
<a class="sourceLine" id="cb224-36" data-line-number="36"><span class="co"># View(tbl_pk_fk_df)</span></a>
<a class="sourceLine" id="cb224-37" data-line-number="37"></a>
<a class="sourceLine" id="cb224-38" data-line-number="38">tables_df &lt;-<span class="st"> </span>tbl_pk_fk_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(table_name)</a>
<a class="sourceLine" id="cb224-39" data-line-number="39"><span class="co"># View(tables_df)</span></a></code></pre></div>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb225-1" data-line-number="1"><span class="kw">library</span>(DiagrammeR)</a>
<a class="sourceLine" id="cb225-2" data-line-number="2"></a>
<a class="sourceLine" id="cb225-3" data-line-number="3">table_nodes_ndf &lt;-<span class="st"> </span><span class="kw">create_node_df</span>(</a>
<a class="sourceLine" id="cb225-4" data-line-number="4">  n &lt;-<span class="st"> </span><span class="kw">nrow</span>(tables_df)</a>
<a class="sourceLine" id="cb225-5" data-line-number="5">  ,type  &lt;-<span class="st"> &#39;table&#39;</span></a>
<a class="sourceLine" id="cb225-6" data-line-number="6">  ,label &lt;-<span class="st"> </span>tables_df<span class="op">$</span>table_name</a>
<a class="sourceLine" id="cb225-7" data-line-number="7">  ,<span class="dt">shape =</span> <span class="st">&quot;rectangle&quot;</span></a>
<a class="sourceLine" id="cb225-8" data-line-number="8">  ,<span class="dt">width =</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb225-9" data-line-number="9">  ,<span class="dt">height =</span> <span class="fl">.5</span></a>
<a class="sourceLine" id="cb225-10" data-line-number="10">  ,<span class="dt">fontsize =</span> <span class="dv">18</span></a>
<a class="sourceLine" id="cb225-11" data-line-number="11">)</a>
<a class="sourceLine" id="cb225-12" data-line-number="12"></a>
<a class="sourceLine" id="cb225-13" data-line-number="13">tbl_pk_fk_ids_df &lt;-<span class="st"> </span><span class="kw">inner_join</span>(tbl_pk_fk_df,table_nodes_ndf</a>
<a class="sourceLine" id="cb225-14" data-line-number="14">                ,<span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&#39;table_name&#39;</span>=<span class="st">&#39;label&#39;</span>)</a>
<a class="sourceLine" id="cb225-15" data-line-number="15">                ,<span class="kw">suffix</span>(<span class="kw">c</span>(<span class="st">&#39;st&#39;</span>,<span class="st">&#39;s&#39;</span>))</a>
<a class="sourceLine" id="cb225-16" data-line-number="16">                ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb225-17" data-line-number="17"><span class="st">     </span><span class="kw">rename</span>(<span class="st">&#39;src_tbl_id&#39;</span> =<span class="st"> </span>id) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb225-18" data-line-number="18"><span class="st">     </span><span class="kw">left_join</span>(table_nodes_ndf</a>
<a class="sourceLine" id="cb225-19" data-line-number="19">               ,<span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&#39;ref_table&#39;</span>=<span class="st">&#39;label&#39;</span>) </a>
<a class="sourceLine" id="cb225-20" data-line-number="20">               ,<span class="kw">suffix</span>(<span class="kw">c</span>(<span class="st">&#39;st&#39;</span>,<span class="st">&#39;t&#39;</span>))</a>
<a class="sourceLine" id="cb225-21" data-line-number="21">               ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb225-22" data-line-number="22"><span class="st">     </span><span class="kw">rename</span>(<span class="st">&#39;fk_tbl_id&#39;</span> =<span class="st"> </span>id) </a>
<a class="sourceLine" id="cb225-23" data-line-number="23"></a>
<a class="sourceLine" id="cb225-24" data-line-number="24">tbl_fk_df &lt;-<span class="st"> </span>tbl_pk_fk_ids_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(constraint_type <span class="op">==</span><span class="st"> &#39;FOREIGN KEY&#39;</span>)     </a>
<a class="sourceLine" id="cb225-25" data-line-number="25">tbl_pk_df &lt;-<span class="st"> </span>tbl_pk_fk_ids_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(constraint_type <span class="op">==</span><span class="st"> &#39;PRIMARY KEY&#39;</span>) </a>
<a class="sourceLine" id="cb225-26" data-line-number="26"><span class="co"># View(tbl_pk_fk_ids_df)</span></a>
<a class="sourceLine" id="cb225-27" data-line-number="27"><span class="kw">kable</span>(<span class="kw">head</span>(tbl_fk_df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">table_name</th>
<th align="left">column_name</th>
<th align="left">constraint_name</th>
<th align="left">constraint_type</th>
<th align="left">ref_table</th>
<th align="left">ref_table_col</th>
<th align="right">src_tbl_id</th>
<th align="left">type.x</th>
<th align="left">shape.x</th>
<th align="right">width.x</th>
<th align="right">height.x</th>
<th align="right">fontsize.x</th>
<th align="right">fk_tbl_id</th>
<th align="left">type.y</th>
<th align="left">shape.y</th>
<th align="right">width.y</th>
<th align="right">height.y</th>
<th align="right">fontsize.y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">address</td>
<td align="left">city_id</td>
<td align="left">fk_address_city</td>
<td align="left">FOREIGN KEY</td>
<td align="left">city</td>
<td align="left">city_id</td>
<td align="right">2</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">4</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
</tr>
<tr class="even">
<td align="left">city</td>
<td align="left">country_id</td>
<td align="left">fk_city</td>
<td align="left">FOREIGN KEY</td>
<td align="left">country</td>
<td align="left">country_id</td>
<td align="right">4</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">5</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="left">customer</td>
<td align="left">address_id</td>
<td align="left">customer_address_id_fkey</td>
<td align="left">FOREIGN KEY</td>
<td align="left">address</td>
<td align="left">address_id</td>
<td align="right">6</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">2</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
</tr>
<tr class="even">
<td align="left">film</td>
<td align="left">language_id</td>
<td align="left">film_language_id_fkey</td>
<td align="left">FOREIGN KEY</td>
<td align="left">language</td>
<td align="left">language_id</td>
<td align="right">7</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">11</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="left">film_actor</td>
<td align="left">actor_id</td>
<td align="left">film_actor_actor_id_fkey</td>
<td align="left">FOREIGN KEY</td>
<td align="left">actor</td>
<td align="left">actor_id</td>
<td align="right">8</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">1</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
</tr>
<tr class="even">
<td align="left">film_actor</td>
<td align="left">film_id</td>
<td align="left">film_actor_film_id_fkey</td>
<td align="left">FOREIGN KEY</td>
<td align="left">film</td>
<td align="left">film_id</td>
<td align="right">8</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">7</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb226-1" data-line-number="1"><span class="kw">kable</span>(<span class="kw">head</span>(tbl_pk_df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">table_name</th>
<th align="left">column_name</th>
<th align="left">constraint_name</th>
<th align="left">constraint_type</th>
<th align="left">ref_table</th>
<th align="left">ref_table_col</th>
<th align="right">src_tbl_id</th>
<th align="left">type.x</th>
<th align="left">shape.x</th>
<th align="right">width.x</th>
<th align="right">height.x</th>
<th align="right">fontsize.x</th>
<th align="right">fk_tbl_id</th>
<th align="left">type.y</th>
<th align="left">shape.y</th>
<th align="right">width.y</th>
<th align="right">height.y</th>
<th align="right">fontsize.y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">actor</td>
<td align="left">actor_id</td>
<td align="left">actor_pkey</td>
<td align="left">PRIMARY KEY</td>
<td align="left"></td>
<td align="left"></td>
<td align="right">1</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">address</td>
<td align="left">address_id</td>
<td align="left">address_pkey</td>
<td align="left">PRIMARY KEY</td>
<td align="left"></td>
<td align="left"></td>
<td align="right">2</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">category</td>
<td align="left">category_id</td>
<td align="left">category_pkey</td>
<td align="left">PRIMARY KEY</td>
<td align="left"></td>
<td align="left"></td>
<td align="right">3</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">city</td>
<td align="left">city_id</td>
<td align="left">city_pkey</td>
<td align="left">PRIMARY KEY</td>
<td align="left"></td>
<td align="left"></td>
<td align="right">4</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">country</td>
<td align="left">country_id</td>
<td align="left">country_pkey</td>
<td align="left">PRIMARY KEY</td>
<td align="left"></td>
<td align="left"></td>
<td align="right">5</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">customer</td>
<td align="left">customer_id</td>
<td align="left">customer_pkey</td>
<td align="left">PRIMARY KEY</td>
<td align="left"></td>
<td align="left"></td>
<td align="right">6</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb227-1" data-line-number="1"><span class="co"># Create an edge data frame, edf</span></a>
<a class="sourceLine" id="cb227-2" data-line-number="2"></a>
<a class="sourceLine" id="cb227-3" data-line-number="3">fk_edf &lt;-</a>
<a class="sourceLine" id="cb227-4" data-line-number="4"><span class="st">  </span><span class="kw">create_edge_df</span>(</a>
<a class="sourceLine" id="cb227-5" data-line-number="5">    <span class="dt">from =</span> tbl_fk_df<span class="op">$</span>src_tbl_id,</a>
<a class="sourceLine" id="cb227-6" data-line-number="6">    <span class="dt">to =</span> tbl_fk_df<span class="op">$</span>fk_tbl_id,</a>
<a class="sourceLine" id="cb227-7" data-line-number="7">    <span class="dt">rel =</span> <span class="st">&quot;fk&quot;</span>,</a>
<a class="sourceLine" id="cb227-8" data-line-number="8">    <span class="dt">label=</span>tbl_fk_df<span class="op">$</span>constraint_name,</a>
<a class="sourceLine" id="cb227-9" data-line-number="9">    <span class="dt">fontsize =</span> <span class="dv">15</span></a>
<a class="sourceLine" id="cb227-10" data-line-number="10">  )</a>
<a class="sourceLine" id="cb227-11" data-line-number="11"><span class="co"># View(fk_edf)</span></a></code></pre></div>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb228-1" data-line-number="1">graph &lt;-</a>
<a class="sourceLine" id="cb228-2" data-line-number="2"><span class="st">  </span><span class="kw">create_graph</span>(</a>
<a class="sourceLine" id="cb228-3" data-line-number="3">    <span class="dt">nodes_df =</span> table_nodes_ndf,</a>
<a class="sourceLine" id="cb228-4" data-line-number="4">    <span class="dt">edges_df =</span> fk_edf,</a>
<a class="sourceLine" id="cb228-5" data-line-number="5">    <span class="dt">graph_name =</span> <span class="st">&#39;Simple FK Graph&#39;</span></a>
<a class="sourceLine" id="cb228-6" data-line-number="6">    )</a>
<a class="sourceLine" id="cb228-7" data-line-number="7"></a>
<a class="sourceLine" id="cb228-8" data-line-number="8"><span class="co"># View the graph</span></a>
<a class="sourceLine" id="cb228-9" data-line-number="9"><span class="kw">render_graph</span>(graph)</a></code></pre></div>
<div id="htmlwidget-aa83b18b48ec4ad64944" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-aa83b18b48ec4ad64944">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"actor\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"2\" [label = \"address\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"3\" [label = \"category\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"4\" [label = \"city\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"5\" [label = \"country\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"6\" [label = \"customer\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"7\" [label = \"film\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"8\" [label = \"film_actor\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"9\" [label = \"film_category\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"10\" [label = \"inventory\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"11\" [label = \"language\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"12\" [label = \"payment\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"13\" [label = \"rental\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"14\" [label = \"staff\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"15\" [label = \"store\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n\"2\"->\"4\" [label = \"fk_address_city\", fontsize = \"15\"] \n\"4\"->\"5\" [label = \"fk_city\", fontsize = \"15\"] \n\"6\"->\"2\" [label = \"customer_address_id_fkey\", fontsize = \"15\"] \n\"7\"->\"11\" [label = \"film_language_id_fkey\", fontsize = \"15\"] \n\"8\"->\"1\" [label = \"film_actor_actor_id_fkey\", fontsize = \"15\"] \n\"8\"->\"7\" [label = \"film_actor_film_id_fkey\", fontsize = \"15\"] \n\"9\"->\"3\" [label = \"film_category_category_id_fkey\", fontsize = \"15\"] \n\"9\"->\"7\" [label = \"film_category_film_id_fkey\", fontsize = \"15\"] \n\"10\"->\"7\" [label = \"inventory_film_id_fkey\", fontsize = \"15\"] \n\"12\"->\"14\" [label = \"payment_staff_id_fkey\", fontsize = \"15\"] \n\"12\"->\"6\" [label = \"payment_customer_id_fkey\", fontsize = \"15\"] \n\"12\"->\"13\" [label = \"payment_rental_id_fkey\", fontsize = \"15\"] \n\"13\"->\"6\" [label = \"rental_customer_id_fkey\", fontsize = \"15\"] \n\"13\"->\"14\" [label = \"rental_staff_id_key\", fontsize = \"15\"] \n\"13\"->\"10\" [label = \"rental_inventory_id_fkey\", fontsize = \"15\"] \n\"14\"->\"2\" [label = \"staff_address_id_fkey\", fontsize = \"15\"] \n\"15\"->\"2\" [label = \"store_address_id_fkey\", fontsize = \"15\"] \n\"15\"->\"14\" [label = \"store_manager_staff_id_fkey\", fontsize = \"15\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb229-1" data-line-number="1"><span class="kw">dbDisconnect</span>(con)</a>
<a class="sourceLine" id="cb229-2" data-line-number="2"><span class="co"># system2(&#39;docker&#39;,&#39;stop sql-pet&#39;)</span></a></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="joins-and-complex-queries-13.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="getting-metadata-about-and-from-the-database-21.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/smithjd/sql-pet/edit/master/15-sql_quick_start_simple_retrieval.Rmd",
"text": "Edit"
},
"download": ["r-database-docker.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
